webpackJsonp([42],{"8Kiw":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),n=a("TVG1"),l={name:"working-time",data:function(){return{backup:[],general:[],customTime:[],generalCustom:[],backupCustom:[],newGeneral:[],newCustom:[],loadingNew:!1}},methods:{getTime:function(){var t=this;this.$http.get("/repair/work/time/config/info").then(function(e){e.data.data.map(function(e,a){"Y"===e.isSlave?t.backup=e.configList:t.general=e.configList})})},save:function(t,e){var a=this,s=null;s=e?{isSlave:"Y",configList:this.backup}:{isSlave:"N",configList:this.general},this.$http.post("/repair/work/time/config/save",i()({},s)).then(function(t){0===t.data.code?(a.$Message.success("保存成功"),a.getTime()):a.$Message.error(t.data.msg)})},getCustom:function(){var t=this;this.$http.get("/repair/work/time/custom/config/info").then(function(e){0===e.data.code&&e.data.data.map(function(e){return"Y"===e.isSlave?e.configList.length>0?t.backupCustom=e.configList.map(function(t){return t.dateRange=[t.beginTime,t.endTime],t}):t.backupCustom=[]:e.configList.length>0?t.generalCustom=e.configList.map(function(t){return t.dateRange=[t.beginTime,t.endTime],t}):t.generalCustom=[],e})})},addNew:function(t){"general"===t?this.newGeneral.push({name:"",dateRange:[],isWorkday:""}):this.newCustom.push({name:"",dateRange:[],isWorkday:""})},saveNew:function(t){var e=this,a=null;if("general"===t?(a=this.newGeneral[0]).isSlave="N":(a=this.newCustom[0]).isSlave="Y",a.name.length<1)return this.$Message.info("特殊日期名称不能为空"),!1;if(!a.dateRange[0])return this.$Message.info("请选择特殊日期范围"),!1;if(!a.isWorkday)return this.$Message.info("请选择是否工作日"),!1;this.loadingNew=!0;var s={name:a.name,isSlave:a.isSlave,beginTime:n.a.formateTime(a.dateRange[0]),endTime:n.a.formateTime(a.dateRange[1]),isWorkday:a.isWorkday};this.$http.post("/repair/work/time/custom/config/save",i()({},s)).then(function(t){0===t.data.code?(e.$Message.success("保存成功"),e.newGeneral=[],e.newCustom=[],e.getCustom()):e.$Message.error("保存失败"+t.data.msg),e.loadingNew=!1})},cancelAdd:function(t,e){"general"===t?this.newGeneral.splice(e,1):this.newCustom.splice(e,1)},deleteTime:function(t){var e=this;this.$store.commit("setDeleteModal",{model:!0,callback:function(){e.$http.delete("/repair/work/time/custom/config/delete?id="+t).then(function(t){0===t.data.code?(e.$Message.success("删除成功"),e.$store.commit("setDeleteModal",{model:!1}),e.getCustom()):(e.$Message.error(t.data.msg),e.$store.commit("setDeleteModal",{model:!1}))})}})}},created:function(){this.getTime(),this.getCustom()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"working-time"},[a("Row",{attrs:{gutter:15}},[a("Col",{staticClass:"mb-15",attrs:{lg:12,md:24}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("普通网点")]),t._v(" "),a("div",{staticStyle:{"margin-top":"-5px"},attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),a("Form",[a("Row",{staticClass:"mb-15",attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"center",offset:"6"}},[t._v("开始时间")]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[t._v("结束时间")])],1),t._v(" "),t._l(t.general,function(e,s){return a("FormItem",{key:s},[a("Row",{attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"right"}},[t._v(t._s(e.name))]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"worktime.beginTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"worktime.endTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Checkbox",{attrs:{"true-value":"N","false-value":"Y"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"worktime.isWorkday"}},[t._v("非工作日")])],1)],1)],1)})],2),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"special-date"},[a("div",{staticClass:"top-title "},[a("h4",{staticClass:"title"},[t._v("特殊日期")]),t._v(" "),a("div",{staticClass:"right-btn"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){t.addNew("general")}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"special-content"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("日期")]),t._v(" "),a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",[t._l(t.generalCustom,function(e,s){return a("tr",{key:s},[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{disabled:"",size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"custom.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{disabled:"",editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"custom.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{disabled:"",size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"custom.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"error",size:"small"},on:{click:function(a){t.deleteTime(e.id)}}},[t._v("删除")])],1)])}),t._v(" "),t._l(t.newGeneral,function(e,s){return a("tr",[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"newTime.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"newTime.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"newTime.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{loading:t.loadingNew,type:"primary",size:"small"},on:{click:function(e){t.saveNew("general")}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{size:"small"},on:{click:function(e){t.cancelAdd("general",s)}}},[t._v("取消")])],1)])})],2)])])])],1)],1),t._v(" "),a("Col",{staticClass:"mb-15",attrs:{lg:12,md:24}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("备用网点")]),t._v(" "),a("div",{staticStyle:{"margin-top":"-5px"},attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.save(e,!0)}}},[t._v("保存")])],1),t._v(" "),a("Form",[a("Row",{staticClass:"mb-15",attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"center",offset:"6"}},[t._v("开始时间")]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[t._v("结束时间")])],1),t._v(" "),t._l(t.backup,function(e){return a("FormItem",{key:e.id},[a("Row",{attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"right"}},[t._v(t._s(e.name))]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"backtime.beginTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"backtime.endTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Checkbox",{attrs:{"true-value":"N","false-value":"Y"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"backtime.isWorkday"}},[t._v("非工作日")])],1)],1)],1)})],2),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"special-date"},[a("div",{staticClass:"top-title "},[a("h4",{staticClass:"title"},[t._v("特殊日期")]),t._v(" "),a("div",{staticClass:"right-btn"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){t.addNew("custom")}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"special-content"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("日期")]),t._v(" "),a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",[t._l(t.backupCustom,function(e){return a("tr",{key:e.id},[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{disabled:"",size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"custom.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{disabled:"",format:"yyyy/MM/dd",size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"custom.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{disabled:"",size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"custom.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"error",size:"small"},on:{click:function(a){t.deleteTime(e.id)}}},[t._v("删除")])],1)])}),t._v(" "),t._l(t.newCustom,function(e,s){return a("tr",[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"newTime.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"newTime.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"newTime.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{loading:t.loadingNew,type:"primary",size:"small"},on:{click:function(e){t.saveNew("backup")}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{size:"small"},on:{click:function(e){t.cancelAdd("backup",s)}}},[t._v("取消")])],1)])})],2)])])])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(l,o,!1,function(t){a("oQWy")},"data-v-2271d27c",null);e.default=r.exports},oQWy:function(t,e){}});