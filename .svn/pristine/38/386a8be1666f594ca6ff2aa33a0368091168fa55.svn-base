webpackJsonp([39],{MivD:function(t,s){},vXjd:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a={name:"inventory-new",computed:{downLink:function(){return localStorage.getItem("baseURL")+"/repair/material/check/order/export"},uploadLink:function(){return localStorage.getItem("baseURL")+"/repair/material/check/order/import"}},data:function(){return{departmentId:"",uploadExcel:null,sureId:null}},methods:{downTpl:function(){window.location.href=this.downLink},uploadSuccess:function(t,s,e){0===t.code?(this.uploadExcel=t.data,this.sureId=t.data.id):this.$Message.error(t.msg)},sureInvent:function(){var t=this,s=this.sureId;s?this.$http.post("/repair/material/check/order/verify?id="+s).then(function(s){0===s.data.code?(t.$Message.success("盘点成功"),t.$router.push({name:"inventory"})):t.$Message.error(s.data.msg)}):this.$Message.warning("请先上传盘点数据")}},mounted:function(){}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"new-inventory"},[e("Card",{staticClass:"mb-15",staticStyle:{"padding-bottom":"20px"}},[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点步骤")]),t._v(" "),e("div",{attrs:{slot:"extra"},slot:"extra"},[e("Button",{staticStyle:{"margin-top":"-5px"},attrs:{type:"primary"},on:{click:function(s){t.$router.back()}}},[t._v("返回上一页")])],1),t._v(" "),e("Row",{staticClass:"mb-15",attrs:{gutter:15}},[e("Col",{attrs:{span:"8"}},[e("div",{staticClass:"inventory-step"},[e("span",{staticClass:"step"},[t._v("1")]),t._v(" "),e("div",{staticClass:"step-content"},[e("Button",{staticClass:"step-target",staticStyle:{"margin-bottom":"4px"},on:{click:t.downTpl}},[t._v("\n              下载数据\n            ")]),t._v(" "),e("span",[t._v("下载服务网点库存数据")])],1)])]),t._v(" "),e("Col",{attrs:{span:"8"}},[e("div",{staticClass:"inventory-step"},[e("span",{staticClass:"step"},[t._v("2")]),t._v(" "),e("div",{staticClass:"step-content"},[e("Upload",{attrs:{action:t.uploadLink,"with-credentials":!0,"show-upload-list":!1,"on-success":t.uploadSuccess}},[e("Button",{staticClass:"step-target"},[t._v("上传数据")])],1),t._v(" "),e("span",[t._v("盘点并上传盘点数据")])],1)])]),t._v(" "),e("Col",{attrs:{span:"8"}},[e("div",{staticClass:"inventory-step"},[e("span",{staticClass:"step"},[t._v("3")]),t._v(" "),e("div",{staticClass:"step-content"},[e("Button",{staticClass:"step-target",staticStyle:{"margin-bottom":"4px"},on:{click:t.sureInvent}},[t._v("确认完成")]),t._v(" "),e("span",[t._v("确认盘点")])],1)])])],1)],1),t._v(" "),t.uploadExcel?e("Card",[e("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点预览")]),t._v(" "),e("div",{staticClass:"table-wrapper"},[e("table",{staticClass:"native-table mb-15"},[e("thead",[e("tr",[e("th",[t._v("组织名称")]),t._v(" "),e("th",[t._v("单号")]),t._v(" "),e("th",[t._v("创建时间")]),t._v(" "),e("th",[t._v("盘点盈亏")]),t._v(" "),e("th",[t._v("盈亏成本")]),t._v(" "),e("th",[t._v("操作人")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v(t._s(t.uploadExcel.departmentName))]),t._v(" "),e("td",[t._v(t._s(t.uploadExcel.orderSn))]),t._v(" "),e("td",[t._v(t._s(t.uploadExcel.createTime))]),t._v(" "),e("td",[t._v(t._s(t.uploadExcel.diffNum))]),t._v(" "),e("td",[t._v(t._s(t.uploadExcel.amount))]),t._v(" "),e("td",[t._v(t._s(t.uploadExcel.creator))])])])]),t._v(" "),e("table",{staticClass:"native-table"},[e("thead",[e("tr",[e("th",[t._v("辅材名称")]),t._v(" "),e("th",[t._v("型号")]),t._v(" "),e("th",[t._v("单位")]),t._v(" "),e("th",[t._v("成本价")]),t._v(" "),e("th",[t._v("系统数量")]),t._v(" "),e("th",[t._v("盘点数")]),t._v(" "),e("th",[t._v("盈亏数")]),t._v(" "),e("th",[t._v("盈亏成本")])])]),t._v(" "),e("tbody",t._l(t.uploadExcel.detailList,function(s){return e("tr",[e("td",[t._v(t._s(s.materialName))]),t._v(" "),e("td",[t._v(t._s(s.materialSpec))]),t._v(" "),e("td",[t._v(t._s(s.unit))]),t._v(" "),e("td",[t._v(t._s(s.price))]),t._v(" "),e("td",[t._v(t._s(s.num))]),t._v(" "),e("td",[t._v(t._s(s.checkedNum))]),t._v(" "),e("td",[t._v(t._s(s.diffNum))]),t._v(" "),e("td",[t._v(t._s(s.amount))])])}))])])]):t._e()],1)},staticRenderFns:[]};var i=e("VU/8")(a,n,!1,function(t){e("MivD")},"data-v-416ba357",null);s.default=i.exports}});
//# sourceMappingURL=39.88f060ed0602438fb911.js.map