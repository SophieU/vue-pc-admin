webpackJsonp([27],{Vsuy:function(t,a){},vXjd:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("TVG1"),n={name:"inventory-new",computed:{uploadLink:function(){return localStorage.getItem("baseURL")+"/repair/material/check/order/import"}},data:function(){return{loadingSave:!1,departmentId:"",uploadExcel:null,sureId:null}},methods:{downTpl:function(){this.$http.get("/repair/material/check/order/export",{responseType:"blob"}).then(function(t){e.a.downloadExcel(t)})},uploadSuccess:function(t,a,s){0===t.code?(this.uploadExcel=t.data,this.sureId=t.data.id):this.$Message.error(t.msg)},sureInvent:function(){var t=this;this.loadingSave=!0;var a=this.sureId;a?this.$http.post("/repair/material/check/order/verify?id="+a).then(function(a){t.loadingSave=!1,0===a.data.code?(t.$Message.success("盘点成功"),t.$router.push({name:"inventory"})):t.$Message.error(a.data.msg)}):(this.$Message.warning("请先上传盘点数据"),this.loadingSave=!1)}},mounted:function(){}},v={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"new-inventory"},[s("Card",{staticClass:"mb-15",staticStyle:{"padding-bottom":"20px"}},[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点步骤")]),t._v(" "),s("div",{attrs:{slot:"extra"},slot:"extra"},[s("Button",{staticStyle:{"margin-top":"-5px"},attrs:{type:"primary"},on:{click:function(a){t.$router.back()}}},[t._v("返回上一页")])],1),t._v(" "),s("Row",{staticClass:"mb-15",attrs:{gutter:15}},[s("Col",{attrs:{span:"8"}},[s("div",{staticClass:"inventory-step"},[s("span",{staticClass:"step"},[t._v("1")]),t._v(" "),s("div",{staticClass:"step-content"},[s("Button",{staticClass:"step-target",staticStyle:{"margin-bottom":"4px"},on:{click:t.downTpl}},[t._v("\n              下载数据\n            ")]),t._v(" "),s("span",[t._v("下载服务网点库存数据")])],1)])]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("div",{staticClass:"inventory-step"},[s("span",{staticClass:"step"},[t._v("2")]),t._v(" "),s("div",{staticClass:"step-content"},[s("Upload",{attrs:{action:t.uploadLink,"with-credentials":!0,"show-upload-list":!1,"on-success":t.uploadSuccess}},[s("Button",{staticClass:"step-target"},[t._v("上传数据")])],1),t._v(" "),s("span",[t._v("盘点并上传盘点数据")])],1)])]),t._v(" "),s("Col",{attrs:{span:"8"}},[s("div",{staticClass:"inventory-step"},[s("span",{staticClass:"step"},[t._v("3")]),t._v(" "),s("div",{staticClass:"step-content"},[s("Button",{staticClass:"step-target",staticStyle:{"margin-bottom":"4px"},attrs:{loading:t.loadingSave},on:{click:t.sureInvent}},[t._v("确认完成")]),t._v(" "),s("span",[t._v("确认盘点")])],1)])])],1)],1),t._v(" "),t.uploadExcel?s("Card",[s("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点预览")]),t._v(" "),s("div",{staticClass:"table-wrapper"},[s("table",{staticClass:"native-table mb-15"},[s("thead",[s("tr",[s("th",[t._v("组织名称")]),t._v(" "),s("th",[t._v("单号")]),t._v(" "),s("th",[t._v("创建时间")]),t._v(" "),s("th",[t._v("盘点盈亏")]),t._v(" "),s("th",[t._v("盈亏成本")]),t._v(" "),s("th",[t._v("操作人")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v(t._s(t.uploadExcel.departmentName))]),t._v(" "),s("td",[t._v(t._s(t.uploadExcel.orderSn))]),t._v(" "),s("td",[t._v(t._s(t.uploadExcel.createTime))]),t._v(" "),s("td",[t._v(t._s(t.uploadExcel.diffNum))]),t._v(" "),s("td",[t._v(t._s(t.uploadExcel.amount))]),t._v(" "),s("td",[t._v(t._s(t.uploadExcel.creator))])])])]),t._v(" "),s("table",{staticClass:"native-table"},[s("thead",[s("tr",[s("th",[t._v("辅材名称")]),t._v(" "),s("th",[t._v("型号")]),t._v(" "),s("th",[t._v("单位")]),t._v(" "),s("th",[t._v("成本价")]),t._v(" "),s("th",[t._v("系统数量")]),t._v(" "),s("th",[t._v("盘点数")]),t._v(" "),s("th",[t._v("盈亏数")]),t._v(" "),s("th",[t._v("盈亏成本")])])]),t._v(" "),s("tbody",t._l(t.uploadExcel.detailList,function(a){return s("tr",[s("td",[t._v(t._s(a.materialName))]),t._v(" "),s("td",[t._v(t._s(a.materialSpec))]),t._v(" "),s("td",[t._v(t._s(a.unit))]),t._v(" "),s("td",[t._v(t._s(a.price))]),t._v(" "),s("td",[t._v(t._s(a.num))]),t._v(" "),s("td",[t._v(t._s(a.checkedNum))]),t._v(" "),s("td",[t._v(t._s(a.diffNum))]),t._v(" "),s("td",[t._v(t._s(a.amount))])])}))])])]):t._e()],1)},staticRenderFns:[]};var i=s("VU/8")(n,v,!1,function(t){s("Vsuy")},"data-v-6adb7a07",null);a.default=i.exports}});
//# sourceMappingURL=27.665487cbdaa80fb2c967.js.map