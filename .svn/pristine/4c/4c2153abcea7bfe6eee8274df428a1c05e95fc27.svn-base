{"version":3,"sources":["webpack:///src/pages/service/service-port.vue","webpack:///./src/pages/service/service-port.vue?fb9c","webpack:///./src/pages/service/service-port.vue"],"names":["service_port","name","data","_this2","this","loadingSave","viewInfo","modalTitle","pageNo","loading","totalCount","pageSize","columns","title","key","align","render","h","params","_this","props","type","on","click","id","row","getStation","getStationInfo","portLists","portSetting","portSettingForm","address","phone","isSlave","regionList","loginName","password","stationLists","portSettingRule","required","message","trigger","validator","rule","value","callback","Error","test","length","methods","getLists","_this3","$http","get","then","res","code","list","pageToggle","page","console","log","pageSizeToggle","size","_this4","saveStation","_this5","formData","stationAdmin","url","stationId","$refs","validate","valid","post","extends_default","$Message","success","init","error","msg","hasNextPage","validateInputTel","event","preventDefault","_this6","newStation","modalHide","val","resetFields","mounted","watch","service_service_port","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","page-size","total","show-sizer","show-elevator","on-change","on-page-size-change","mask-closable","on-visible-change","model","$$v","expression","ref","rules","label-width","label-position","label","prop","disabled","$set","placeholder","on-keydown","_l","station","_s","slot","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.8c2cc7d5387892e0690f.js","sourcesContent":["\n<style scoped lang=\"scss\">\n  @import './service';\n</style>\n<template>\n    <div>\n      <Card>\n        <div class=\"clearfix mb-15\">\n          <div class=\"pull-left\">\n            <Button type=\"primary\" @click=\"newStation\">新建</Button>\n          </div>\n        </div>\n        <div class=\"table-wrapper\">\n          <Table :loading=\"loading\" :data=\"portLists\" :columns=\"columns\"></Table>\n          <div class=\"pagination\">\n            <Page :page-size=\"pageSize\" :total=\"totalCount\" show-sizer show-elevator\n                  @on-change=\"pageToggle\"\n                  @on-page-size-change=\"pageSizeToggle\"\n            ></Page>\n          </div>\n        </div>\n      </Card>\n      <Modal :mask-closable=\"false\" v-model=\"portSetting\" :title=\"modalTitle+'服务网点'\" @on-visible-change=\"modalHide\">\n        <Form ref=\"portSet\" :model=\"portSettingForm\" :rules=\"portSettingRule\" :label-width=\"120\" label-position=\"right\">\n          <FormItem label=\"服务网点名称\" prop=\"name\">\n            <Input :disabled=\"viewInfo\" v-model=\"portSettingForm.name\" class=\"form-input\"/>\n          </FormItem>\n          <FormItem label=\"服务网点地址\" prop=\"address\">\n            <Input :disabled=\"viewInfo\" v-model=\"portSettingForm.address\"  class=\"form-input\"/>\n          </FormItem>\n          <FormItem label=\"服务网点电话\" prop=\"phone\">\n            <Input :disabled=\"viewInfo\" placeholder=\"请输入手机或座机号\" @on-keydown=\"validateInputTel\"  v-model=\"portSettingForm.phone\" class=\"form-input\"/>\n          </FormItem>\n          <FormItem label=\"服务区域设置\" prop=\"regionList\">\n            <CheckboxGroup v-model=\"portSettingForm.regionList\" >\n              <ul class=\"column_3\">\n                <li v-for=\"station in stationLists\"><Checkbox :disabled=\"viewInfo\" :label=\"station.id\" >{{station.name}}</Checkbox></li>\n              </ul>\n            </CheckboxGroup>\n\n          </FormItem>\n          <FormItem label=\"管理员账号\" prop=\"loginName\">\n            <Input :disabled=\"viewInfo\" v-model=\"portSettingForm.loginName\" class=\"form-input\"/>\n          </FormItem>\n          <FormItem label=\"登陆密码\" prop=\"password\">\n            <Input :disabled=\"viewInfo\" type=\"password\" placeholder=\"请设置6~10位密码\"  v-model=\"portSettingForm.password\" class=\"form-input\"/>\n          </FormItem>\n          <FormItem label=\"备用网点\">\n            <i-switch :disabled=\"viewInfo\" v-model=\"portSettingForm.isSlave\">\n              <span slot=\"open\">是</span>\n              <span slot=\"close\">否</span>\n            </i-switch>\n          </FormItem>\n        </Form>\n        <div slot=\"footer\">\n          <div class=\"inner-center\">\n            <template  v-if=\"!viewInfo\">\n              <Button @click=\"portSetting=false\">取消</Button>\n              <Button :loading=\"loadingSave\" @click=\"saveStation('portSet')\" type=\"primary\">确认</Button>\n            </template>\n            <!--查看-->\n            <template v-else>\n                <Button @click=\"viewInfo=false\" type=\"primary\">编辑</Button>\n                <Button @click=\"portSetting=false\">返回</Button>\n            </template>\n\n          </div>\n        </div>\n      </Modal>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"service-port\",\n      data(){\n          const validatePhone=function(rule,value,callback){\n            if(value===''){\n              callback(new Error('请输入联系电话'))\n            }else{\n              if(value!==''){\n                let regTel=/^1[3456789]\\d{9}/;\n                let regTel2=/0\\d{2,3}-\\d{7,8}/;\n                if(regTel.test(value)||regTel2.test(value)){\n                  callback();\n                }else{\n                  callback(new Error('请输入正确格式的电话'))\n                }\n              }\n            }\n          };\n          const validatePWDLen = function(rule,value,callback){\n            if(value.length<6){\n              callback(new Error('密码至少6位'));\n            }else if(value.length>10){\n              callback(new Error('密码最多10位'));\n            }else{\n              callback();\n            }\n          };\n          return{\n            loadingSave:false,\n            viewInfo:false, //查看网点信息时，所有项 不可编辑\n            modalTitle:'添加',\n            pageNo:1,\n            loading:true,\n            totalCount:0,\n            pageSize:10,\n            columns:[\n              {title:'网点名称',key:'name',align:'center'},\n              {title:'备用网点',key:'isSlave',align:'center'},\n              {title:'网点地址',key:'address',align:'center'},\n              {title:'联系电话',key:'phone',align:'center'},\n              {title:'服务区域数量',key:'regionNum',align:'center'},\n              {title:'操作',align:'center',render:(h,params)=>{\n                  let _this = this;\n                  return h('div',[\n                    h('Button',{\n                      props:{type:'text'},\n                      on:{\n                        click:()=>{\n                          let id = params.row.id;\n                          _this.viewInfo=true;\n                          _this.modalTitle='查看';\n                          _this.getStation(id);\n                          _this.getStationInfo(id);\n                        }\n                      }\n                    },'查看'),\n                    h('Button',{\n                      props:{type:'text'},\n                      on:{\n                        click:()=>{\n                          let id=params.row.id;\n                          _this.viewInfo=false;\n                          _this.modalTitle='编辑';\n                          _this.getStation(id);\n                          _this.getStationInfo(id);\n                        }\n                      }\n                    },'编辑'),\n                  ])\n                }},\n            ],\n            portLists:[], //列表数据\n            portSetting:false, //开启弹窗\n            portSettingForm:{\n              name:'',\n              address:'',\n              phone:'',\n              isSlave:false,\n              regionList:[],\n              loginName:'',\n              password:'',\n            },\n            stationLists:[], //可用的区域列表\n            portSettingRule:{ //表单验证\n              name:[{ required: true, message: '请输入网点名称', trigger: 'blur' }],\n              address:[{ required: true, message: '请输入网点地址', trigger: 'blur' }],\n              phone:[\n                { required: true, message: '请输入网点电话', trigger: 'blur' },\n                { validator: validatePhone, trigger: 'blur' }],\n              loginName:[{ required: true, message: '管理员账号', trigger: 'blur' }],\n              password:[\n                  { required: true, message: '管理员密码', trigger: 'blur' },\n                  {validator:validatePWDLen, trigger: 'blur' },\n                ],\n            }\n          }\n      },\n      methods:{\n          //获取列表\n          getLists(){\n            let params = `pageNo=${this.pageNo}&pageSize=${this.pageSize}`;\n            this.$http.get(`/repair/station/list?${params}`)\n              .then(res=>{\n                let data = res.data;\n                if(data.code===0){\n                  this.loading=false;\n                  this.portLists=data.data.list;\n                  this.pageSize=data.data.pageSize;\n                  this.totalCount = data.data.totalCount;\n\n                }\n\n              })\n          },\n        //页码变化\n        pageToggle(page){\n            console.log(page)\n          this.pageNo=page;\n          this.getLists();\n        },\n        //每页条数变化\n        pageSizeToggle(size){\n          this.pageSize=size;\n          this.getLists();\n        },\n        getStation(id){\n          this.$http.get(`/repair/station/region/list?id=${id}`)\n            .then(res=>{\n              if(res.data.code===0){\n                let data=res.data.data;\n                this.stationLists=data;\n              }\n            })\n        },\n        //新增或修改网点\n        saveStation(name){\n            this.loadingSave=true;\n          let formData= this.portSettingForm;\n          let params={\n            name:formData.name,\n            address:formData.address,\n            phone:formData.phone,\n            isSlave:formData.isSlave?'Y':'N',\n            stationAdmin:{\n              loginName:formData.loginName,\n              // password:formData.password\n            },\n            regionList:formData.regionList\n          };\n          let url = '';\n          if(formData.id){\n            //有id为修改\n            url='/repair/station/edit';\n            params.id=formData.id;\n            params.stationAdmin.id=formData.stationId;\n            if(formData.password!=='000000'){ //未修改密码时的默认值\n              params.stationAdmin.password=formData.password;\n            }\n          }else{\n            url='/repair/station/add';\n            params.stationAdmin.password=formData.password;\n          }\n\n          this.$refs[name].validate(valid=>{\n            if(valid){\n              this.$http.post(url,{\n                ...params\n              }).then(res=>{\n                if(res.data.code===0){\n                  this.$Message.success('保存成功');\n                  this.init();\n                  this.getLists();\n                }else{\n                  this.$Message.error(`保存失败,${res.data.msg}`)\n                }\n                this.portSetting=false;\n              })\n            }else{\n              this.$Message.error('输入有误，表单未提交');\n            }\n            this.loadingSave=false;\n          })\n\n        },\n        init(){\n          this.pageNo=1;\n          this.hasNextPage=true;\n\n        },\n        //验证电话输入，只能是数字或-\n        validateInputTel(event){\n            let key = event.key;\n            let reg=/(\\d|\\-)/;\n            if(!reg.test(key)&&key!=='Backspace'){\n              event.preventDefault();\n              return false;\n            }\n        },\n        //查询网点信息\n        getStationInfo(id){\n            // /repair/station/info?id=1\n            this.$http.get(`/repair/station/info?id=${id}`)\n              .then(res=>{\n                if(res.data.code===0){\n                  let data = res.data.data;\n                  this.portSettingForm={\n                    name:data.name,\n                    address:data.address,\n                    phone:data.phone,\n                    isSlave:data.isSlave==='Y'?true:false,\n                    regionList:data.regionList,\n                    loginName:data.stationAdmin?data.stationAdmin.loginName:'',\n                    password:data.stationAdmin?'000000':'',\n                    stationId:data.stationAdmin?data.stationAdmin.id:'',\n                    id:data.id,\n                  };\n                  this.portSetting=true;\n                }\n              })\n        },\n        //新建网点\n        newStation(){\n          this.portSettingForm={\n              name:'',\n              address:'',\n              phone:'',\n              isSlave:false,\n              regionList:[],\n              loginName:'',\n              password:'',\n          };\n          this.getStation();\n          this.modalTitle='添加';\n          this.viewInfo=false;\n          this.portSetting=true;\n        },\n        modalHide(val){\n            if(!val){\n              this.$refs['portSet'].resetFields(); //重置验证信息\n\n            }\n        }\n      },\n      mounted(){\n          this.getLists();\n          this.getStation();\n      },\n      watch:{\n        // regionListCheck(newVal,oldVal){\n        //   console.log('reginListCheck changed'+newVal)\n        //\n        // }\n      }\n    }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/service/service-port.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Card',[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.newStation}},[_vm._v(\"新建\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"table-wrapper\"},[_c('Table',{attrs:{\"loading\":_vm.loading,\"data\":_vm.portLists,\"columns\":_vm.columns}}),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('Page',{attrs:{\"page-size\":_vm.pageSize,\"total\":_vm.totalCount,\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":_vm.pageToggle,\"on-page-size-change\":_vm.pageSizeToggle}})],1)],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"mask-closable\":false,\"title\":_vm.modalTitle+'服务网点'},on:{\"on-visible-change\":_vm.modalHide},model:{value:(_vm.portSetting),callback:function ($$v) {_vm.portSetting=$$v},expression:\"portSetting\"}},[_c('Form',{ref:\"portSet\",attrs:{\"model\":_vm.portSettingForm,\"rules\":_vm.portSettingRule,\"label-width\":120,\"label-position\":\"right\"}},[_c('FormItem',{attrs:{\"label\":\"服务网点名称\",\"prop\":\"name\"}},[_c('Input',{staticClass:\"form-input\",attrs:{\"disabled\":_vm.viewInfo},model:{value:(_vm.portSettingForm.name),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"name\", $$v)},expression:\"portSettingForm.name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务网点地址\",\"prop\":\"address\"}},[_c('Input',{staticClass:\"form-input\",attrs:{\"disabled\":_vm.viewInfo},model:{value:(_vm.portSettingForm.address),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"address\", $$v)},expression:\"portSettingForm.address\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务网点电话\",\"prop\":\"phone\"}},[_c('Input',{staticClass:\"form-input\",attrs:{\"disabled\":_vm.viewInfo,\"placeholder\":\"请输入手机或座机号\"},on:{\"on-keydown\":_vm.validateInputTel},model:{value:(_vm.portSettingForm.phone),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"phone\", $$v)},expression:\"portSettingForm.phone\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务区域设置\",\"prop\":\"regionList\"}},[_c('CheckboxGroup',{model:{value:(_vm.portSettingForm.regionList),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"regionList\", $$v)},expression:\"portSettingForm.regionList\"}},[_c('ul',{staticClass:\"column_3\"},_vm._l((_vm.stationLists),function(station){return _c('li',[_c('Checkbox',{attrs:{\"disabled\":_vm.viewInfo,\"label\":station.id}},[_vm._v(_vm._s(station.name))])],1)}))])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"管理员账号\",\"prop\":\"loginName\"}},[_c('Input',{staticClass:\"form-input\",attrs:{\"disabled\":_vm.viewInfo},model:{value:(_vm.portSettingForm.loginName),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"loginName\", $$v)},expression:\"portSettingForm.loginName\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"登陆密码\",\"prop\":\"password\"}},[_c('Input',{staticClass:\"form-input\",attrs:{\"disabled\":_vm.viewInfo,\"type\":\"password\",\"placeholder\":\"请设置6~10位密码\"},model:{value:(_vm.portSettingForm.password),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"password\", $$v)},expression:\"portSettingForm.password\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"备用网点\"}},[_c('i-switch',{attrs:{\"disabled\":_vm.viewInfo},model:{value:(_vm.portSettingForm.isSlave),callback:function ($$v) {_vm.$set(_vm.portSettingForm, \"isSlave\", $$v)},expression:\"portSettingForm.isSlave\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('div',{staticClass:\"inner-center\"},[(!_vm.viewInfo)?[_c('Button',{on:{\"click\":function($event){_vm.portSetting=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"loading\":_vm.loadingSave,\"type\":\"primary\"},on:{\"click\":function($event){_vm.saveStation('portSet')}}},[_vm._v(\"确认\")])]:[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.viewInfo=false}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('Button',{on:{\"click\":function($event){_vm.portSetting=false}}},[_vm._v(\"返回\")])]],2)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b8cbfd48\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/service/service-port.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b8cbfd48\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./service-port.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./service-port.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./service-port.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b8cbfd48\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./service-port.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b8cbfd48\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/service/service-port.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}