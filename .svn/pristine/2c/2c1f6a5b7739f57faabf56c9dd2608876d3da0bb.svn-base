webpackJsonp([25],{"/eQF":function(t,e){},vXjd:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"inventory-new",computed:{downLink:function(){return localStorage.getItem("baseURL")+"/repair/material/check/order/export"},uploadLink:function(){return localStorage.getItem("baseURL")+"/repair/material/check/order/import"}},data:function(){return{departmentLists:[],departmentId:"",uploadExcel:null,sureId:null}},methods:{getOrgan:function(){var t=this;this.$http.get("/repair/material/check/order/departmentList").then(function(e){0===e.data.code?t.departmentLists=e.data.data:console.log("辅料盘点："+e.data.msg)})},uploadSuccess:function(t,e,a){0===t.code?(this.uploadExcel=t.data,this.sureId=t.data.id):this.$Message.error(t.msg)},sureInvent:function(){var t=this,e=this.sureId;e?this.$http.post("/repair/material/check/order/verify?id="+e).then(function(e){0===e.data.code?(t.$Message.success("盘点成功"),t.$router.push({name:"inventory"})):t.$Message.error(e.data.msg)}):this.$Message.warning("请先上传盘点数据")}},mounted:function(){this.getOrgan()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-inventory"},[a("Card",{staticClass:"mb-15",staticStyle:{"padding-bottom":"20px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点步骤")]),t._v(" "),a("div",{attrs:{slot:"extra"},slot:"extra"},[a("Button",{staticStyle:{"margin-top":"-5px"},attrs:{type:"primary"},on:{click:function(e){t.$router.back()}}},[t._v("返回上一页")])],1),t._v(" "),a("Form",{staticClass:"mb-15",attrs:{"label-width":100}},[a("FormItem",{attrs:{label:"组织名称"}},[a("Select",{staticStyle:{width:"300px"},model:{value:t.departmentId,callback:function(e){t.departmentId=e},expression:"departmentId"}},t._l(t.departmentLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),a("Row",{staticClass:"mb-15",attrs:{gutter:15}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"inventory-step"},[a("span",{staticClass:"step"},[t._v("1")]),t._v(" "),a("div",{staticClass:"step-content"},[a("Button",{staticClass:"step-target"},[a("a",{attrs:{href:t.downLink}},[t._v("下载数据")])]),t._v(" "),a("span",[t._v("下载服务网点库存数据")])],1)])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"inventory-step"},[a("span",{staticClass:"step"},[t._v("2")]),t._v(" "),a("div",{staticClass:"step-content"},[a("Upload",{attrs:{action:t.uploadLink,"with-credentials":!0,"on-success":t.uploadSuccess}},[a("Button",{staticClass:"step-target"},[t._v("上传数据")])],1),t._v(" "),a("span",[t._v("盘点并上传盘点数据")])],1)])]),t._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"inventory-step"},[a("span",{staticClass:"step"},[t._v("3")]),t._v(" "),a("div",{staticClass:"step-content"},[a("Button",{staticClass:"step-target",on:{click:t.sureInvent}},[t._v("确认完成")]),t._v(" "),a("span",[t._v("确认盘点")])],1)])])],1)],1),t._v(" "),t.uploadExcel?a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("盘点预览")]),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("table",{staticClass:"native-table mb-15"},[a("thead",[a("tr",[a("th",[t._v("组织名称")]),t._v(" "),a("th",[t._v("单号")]),t._v(" "),a("th",[t._v("创建时间")]),t._v(" "),a("th",[t._v("盘点盈亏")]),t._v(" "),a("th",[t._v("盈亏成本")]),t._v(" "),a("th",[t._v("操作人")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v(t._s(t.uploadExcel.departmentName))]),t._v(" "),a("td",[t._v(t._s(t.uploadExcel.orderSn))]),t._v(" "),a("td",[t._v(t._s(t.uploadExcel.createTime))]),t._v(" "),a("td",[t._v(t._s(t.uploadExcel.diffNum))]),t._v(" "),a("td",[t._v(t._s(t.uploadExcel.amount))]),t._v(" "),a("td",[t._v(t._s(t.uploadExcel.creator))])])])]),t._v(" "),a("table",{staticClass:"native-table"},[a("thead",[a("tr",[a("th",[t._v("辅材名称")]),t._v(" "),a("th",[t._v("型号")]),t._v(" "),a("th",[t._v("单位")]),t._v(" "),a("th",[t._v("成本价")]),t._v(" "),a("th",[t._v("系统数量")]),t._v(" "),a("th",[t._v("盘点数")]),t._v(" "),a("th",[t._v("盈亏数")]),t._v(" "),a("th",[t._v("盈亏成本")])])]),t._v(" "),a("tbody",t._l(t.uploadExcel.detailList,function(e){return a("tr",[a("td",[t._v(t._s(e.materialName))]),t._v(" "),a("td",[t._v(t._s(e.materialSpec))]),t._v(" "),a("td",[t._v(t._s(e.unit))]),t._v(" "),a("td",[t._v(t._s(e.price))]),t._v(" "),a("td",[t._v(t._s(e.num))]),t._v(" "),a("td",[t._v(t._s(e.checkedNum))]),t._v(" "),a("td",[t._v(t._s(e.diffNum))]),t._v(" "),a("td",[t._v(t._s(e.amount))])])}))])])]):t._e()],1)},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(t){a("/eQF")},"data-v-68b19174",null);e.default=r.exports}});
//# sourceMappingURL=25.165538f6611df0296de3.js.map