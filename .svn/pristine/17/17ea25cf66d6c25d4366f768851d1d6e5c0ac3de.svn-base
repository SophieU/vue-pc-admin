webpackJsonp([34],{R0JI:function(t,e){},S29g:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("TVG1"),r={name:"storage-admin",data:function(){return{filter:!1,columns:[{title:"组织名称",key:"departmentName",align:"center"},{title:"名称",key:"materialName",align:"center"},{title:"报修分类",key:"repairCategoryName",align:"center"},{title:"型号",key:"materialSpec",align:"center"},{title:"单位",key:"materialUnit",align:"center"},{title:"当前库存",key:"storage",align:"center"}],storageLists:[],pageNo:1,pageSize:10,totalCount:0,filterForm:{repairCategoryId:"",materialName:"",departmentId:""},organLists:[],repairLists:[]}},methods:{downloadExcel:function(){var t=i.a.formatterParams(this.filterForm);this.$http.post("/repair/material/storage/list/export?"+t,null,{responseType:"blob"}).then(function(t){i.a.downloadExcel(t)})},getRepairType:function(){var t=this;this.$http.get("/repair/category/list").then(function(e){0===e.data.code&&(t.repairLists=e.data.data)})},getLists:function(t){var e=this,a="pageNo="+this.pageNo+"&pageSize="+this.pageSize;t&&(a=a+"&"+i.a.formatterParams(t)),this.$http.post("/repair/material/storage/list?"+a).then(function(t){if(0===t.data.code){var a=t.data.data;e.storageLists=a.list,e.pageSize=a.pageSize,e.totalCount=a.totalCount,e.filter=!1}else console.log("辅材库存管理列表获取失败："+t.data.msg)})},pageChange:function(t){this.pageNo=t,this.getLists()},pageSizeChange:function(t){this.pageSize=t,this.getLists()},sureFilter:function(){var t=this.filterForm;this.getLists(t)},clearFilter:function(){this.filterForm={repairCategoryId:"",materialName:"",departmentId:""},this.filter=!1}},mounted:function(){var t=this;this.getLists(),i.a.getDepartment(function(e){t.organLists=e}),this.getRepairType()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"materials"})}}},[t._v("新增辅材分类")]),t._v(" "),a("Button",{on:{click:function(e){t.filter=!0}}},[t._v("筛选")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.downloadExcel}},[t._v("excel导出")])],1)]),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("Table",{attrs:{columns:t.columns,data:t.storageLists}}),t._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{total:t.totalCount,"show-sizer":"","show-elevator":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1),t._v(" "),a("Drawer",{attrs:{width:"425",title:"辅材筛选"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.sureFilter}},[t._v("确定")])],1)]),t._v(" "),a("div",[a("Form",{attrs:{model:t.filterForm,"label-position":"top"}},[a("FormItem",{attrs:{label:"组织名称"}},[a("Select",{model:{value:t.filterForm.departmentId,callback:function(e){t.$set(t.filterForm,"departmentId",e)},expression:"filterForm.departmentId"}},t._l(t.organLists,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"报修类型"}},[a("Select",{model:{value:t.filterForm.repairCategoryId,callback:function(e){t.$set(t.filterForm,"repairCategoryId",e)},expression:"filterForm.repairCategoryId"}},t._l(t.repairLists,function(e,i){return a("Option",{key:i,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"名称"}},[a("Input",{model:{value:t.filterForm.materialName,callback:function(e){t.$set(t.filterForm,"materialName",e)},expression:"filterForm.materialName"}})],1)],1)],1)])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,l,!1,function(t){a("R0JI")},"data-v-58411fa0",null);e.default=s.exports}});
//# sourceMappingURL=34.f54c9def778c2ce79782.js.map