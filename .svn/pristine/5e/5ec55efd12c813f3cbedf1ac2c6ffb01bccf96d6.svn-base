webpackJsonp([8],{OAWc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),i=a("TVG1"),o={name:"draw-pool",components:{countUp:a("ga8b").a},data:function(){var t=this;return{filter:!1,columns:[{title:"名称",key:"materialName",align:"center"},{title:"工单号",key:"orderSn",align:"center",width:190},{title:"报修分类",key:"repairCategoryName",align:"center"},{title:"型号",key:"materialSpec",align:"center"},{title:"师傅",key:"serverName",align:"center"},{title:"报修使用",key:"orderUseNum",align:"center"},{title:"售后使用",key:"afterSaleUseNum",align:"center"},{title:"日期",key:"payTime",align:"center"},{title:"成本合计",key:"amount",align:"center"},{title:"组织名称",key:"departmentName",align:"center"},{title:"操作",align:"center",render:function(e,a){var r=t;return e("Button",{props:{type:"primary",size:"small"},on:{click:function(){var t=a.row.id;r.$router.push({name:"orderDetail",query:{id:t}})}}},"查看订单")}}],materialTotal:0,lists:[],pageNo:1,pageSize:10,totalCount:0,filterForm:{repairCategoryId:"",serverName:"",materialName:"",departmentId:"",startDate:"",endDate:"",dateRange:[]},repairLists:[],departmentLists:[]}},methods:{dateRangeChange:function(t){this.filterForm.startDate=t[0],this.filterForm.endDate=t[1]},getCount:function(t){var e=this,a="pageNo="+this.pageNo+"&pageSize="+this.pageSize,r="";t&&(r=i.a.formatterParams(this.filterForm)),this.$http.post("/repair/material/storage/use/count?"+a+"&"+r).then(function(t){0===t.data.code?e.materialTotal=t.data.data:console.log("员工领用Count:"+t.data.msg)})},getLists:function(t){var e=this,a="pageNo="+this.pageNo+"&pageSize="+this.pageSize,r="";t&&(r=i.a.formatterParams(this.filterForm)),this.$http.post("/repair/material/storage/use/list?"+a+"&"+r).then(function(t){if(0===t.data.code){var a=t.data.data;e.pageSize=a.pageSize,e.totalCount=a.totalCount,e.lists=a.list,e.filter=!1}else console.log("员工领用列表:"+t.data.msg)})},pageChange:function(t){this.pageNo=t;var e=this.filterForm;delete e.dateRange,this.getCount(e),this.getLists(e)},pageSizeChange:function(t){this.pageSize=t;var e=this.filterForm;delete e.dateRange,this.getLists(e),this.getCount(e)},sureFilter:function(){var t=n()({},this.filterForm);delete t.dateRange,this.getLists(t),this.getCount(t)},clearFilter:function(){this.filterForm={repairCategoryId:"",serverName:"",materialName:"",departmentId:"",startDate:"",endDate:"",dateRange:[]},this.getLists()},exportExcel:function(){var t=n()({},this.filterForm);delete t.dateRange;var e=i.a.formatterParams(t);this.$http.post("/repair/material/storage/use/list/export?"+e,null,{responseType:"blob"}).then(function(t){i.a.downloadExcel(t)})}},mounted:function(){var t=this;i.a.getRepairType(function(e){t.repairLists=e}),i.a.getDepartment(function(e){t.departmentLists=e}),this.getLists(),this.getCount()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{on:{click:function(e){t.filter=!0}}},[t._v("筛选")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.exportExcel}},[t._v("excel导出")])],1)]),t._v(" "),a("Card",{staticStyle:{"max-width":"400px","margin-bottom":"15px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("使用总数")]),t._v(" "),t.filterForm.startDate&&t.filterForm.endDate?a("p",{staticClass:"text-blue",attrs:{slot:"extra"},slot:"extra"},[t._v(t._s(t.filterForm.startDate)+"-"+t._s(t.filterForm.endDate))]):t._e(),t._v(" "),a("div",[a("count-up",{staticClass:"infor-card-count user-created-count",attrs:{"id-name":"total","end-val":t.materialTotal,color:"#039dff",countSize:"60px",countWeight:700}})],1)]),t._v(" "),a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("明细")]),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("Table",{attrs:{columns:t.columns,data:t.lists}}),t._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{total:t.totalCount,"show-elevator":"","show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1)]),t._v(" "),a("Drawer",{attrs:{title:"领用筛选",width:"425"},on:{"on-close":t.clearFilter},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.sureFilter}},[t._v("确定筛选")])],1)]),t._v(" "),a("div",[a("Form",{ref:"filterForm",attrs:{model:t.filterForm,"label-position":"top"}},[a("FormItem",{attrs:{label:"报修类型"}},[a("Select",{attrs:{prop:"repairCategoryId"},model:{value:t.filterForm.repairCategoryId,callback:function(e){t.$set(t.filterForm,"repairCategoryId",e)},expression:"filterForm.repairCategoryId"}},t._l(t.repairLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"服务人员",prop:"serverName"}},[a("Input",{model:{value:t.filterForm.serverName,callback:function(e){t.$set(t.filterForm,"serverName",e)},expression:"filterForm.serverName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"辅材名称",prop:"materialName"}},[a("Input",{model:{value:t.filterForm.materialName,callback:function(e){t.$set(t.filterForm,"materialName",e)},expression:"filterForm.materialName"}})],1),t._v(" "),a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange"},on:{"on-change":t.dateRangeChange},model:{value:t.filterForm.dateRange,callback:function(e){t.$set(t.filterForm,"dateRange",e)},expression:"filterForm.dateRange"}})],1),t._v(" "),a("FormItem",{attrs:{label:"服务网点",prop:"departmentId"}},[a("Select",{model:{value:t.filterForm.departmentId,callback:function(e){t.$set(t.filterForm,"departmentId",e)},expression:"filterForm.departmentId"}},t._l(t.departmentLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1)])],1)},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(t){a("jikA")},"data-v-3371f6f4",null);e.default=l.exports},QZmR:function(t,e){},ga8b:function(t,e,a){"use strict";var r=a("lZPY"),n=a.n(r);function i(t){var e=0,a="";return t<1e3?e=t:t>=1e3&&t<1e6?(e=parseInt(t/1e3),a="K+"):t>=1e6&&t<1e10?(e=parseInt(t/1e6),a="M+"):(e=parseInt(t/1e9),a="B+"),{val:e,unit:a}}var o={data:function(){return{unit:"",demo:{}}},name:"countUp",props:{idName:String,className:String,startVal:{type:Number,default:0},endVal:{type:Number,required:!0},decimals:{type:Number,default:0},duration:{type:Number,default:2},delay:{type:Number,default:300},options:{type:Object,default:function(){return{useEasing:!0,useGrouping:!0,separator:",",decimal:"."}}},color:String,countSize:{type:String,default:"30px"},countWeight:{type:Number,default:700},introText:[String,Number]},mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){var e=i(t.endVal),a=e.val;t.unit=e.unit;var r={};t.demo=r=new n.a(t.idName,t.startVal,a,t.decimals,t.duration,t.options),r.error||r.start()},t.delay)})},watch:{endVal:function(t){var e=this,a=i(t),r=a.val;this.unit=a.unit;var n=setInterval(function(){e.demo.update&&(clearInterval(n),e.demo.update(r))},100)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"infor-card-total"},[a("p",{staticClass:"total-count",style:{width:"100%",textAlign:"center",color:t.color,fontSize:t.countSize,fontWeight:t.countWeight}},[a("span",{attrs:{id:t.idName}},[t._v(t._s(t.startVal))]),a("span",[t._v(t._s(t.unit))])]),t._v(" "),t._t("intro")],2)},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(t){a("QZmR")},"data-v-46c60f0e",null);e.a=l.exports},jikA:function(t,e){},lZPY:function(t,e,a){var r,n;void 0===(n="function"==typeof(r=function(t,e,a){return function(t,e,a,r,n,i){for(var o=0,s=["webkit","moz","ms","o"],l=0;l<s.length&&!window.requestAnimationFrame;++l)window.requestAnimationFrame=window[s[l]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[s[l]+"CancelAnimationFrame"]||window[s[l]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var a=(new Date).getTime(),r=Math.max(0,16-(a-o)),n=window.setTimeout(function(){t(a+r)},r);return o=a+r,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)});var m=this;for(var u in m.options={useEasing:!0,useGrouping:!0,separator:",",decimal:".",easingFn:null,formattingFn:null},i)i.hasOwnProperty(u)&&(m.options[u]=i[u]);""===m.options.separator&&(m.options.useGrouping=!1),m.options.prefix||(m.options.prefix=""),m.options.suffix||(m.options.suffix=""),m.d="string"==typeof t?document.getElementById(t):t,m.startVal=Number(e),m.endVal=Number(a),m.countDown=m.startVal>m.endVal,m.frameVal=m.startVal,m.decimals=Math.max(0,r||0),m.dec=Math.pow(10,m.decimals),m.duration=1e3*Number(n)||2e3,m.formatNumber=function(t){var e,a,r,n;if(t=t.toFixed(m.decimals),a=(e=(t+="").split("."))[0],r=e.length>1?m.options.decimal+e[1]:"",n=/(\d+)(\d{3})/,m.options.useGrouping)for(;n.test(a);)a=a.replace(n,"$1"+m.options.separator+"$2");return m.options.prefix+a+r+m.options.suffix},m.easeOutExpo=function(t,e,a,r){return a*(1-Math.pow(2,-10*t/r))*1024/1023+e},m.easingFn=m.options.easingFn?m.options.easingFn:m.easeOutExpo,m.formattingFn=m.options.formattingFn?m.options.formattingFn:m.formatNumber,m.version=function(){return"1.7.1"},m.printValue=function(t){var e=m.formattingFn(t);"INPUT"===m.d.tagName?this.d.value=e:"text"===m.d.tagName||"tspan"===m.d.tagName?this.d.textContent=e:this.d.innerHTML=e},m.count=function(t){m.startTime||(m.startTime=t),m.timestamp=t;var e=t-m.startTime;m.remaining=m.duration-e,m.options.useEasing?m.countDown?m.frameVal=m.startVal-m.easingFn(e,0,m.startVal-m.endVal,m.duration):m.frameVal=m.easingFn(e,m.startVal,m.endVal-m.startVal,m.duration):m.countDown?m.frameVal=m.startVal-(m.startVal-m.endVal)*(e/m.duration):m.frameVal=m.startVal+(m.endVal-m.startVal)*(e/m.duration),m.countDown?m.frameVal=m.frameVal<m.endVal?m.endVal:m.frameVal:m.frameVal=m.frameVal>m.endVal?m.endVal:m.frameVal,m.frameVal=Math.round(m.frameVal*m.dec)/m.dec,m.printValue(m.frameVal),e<m.duration?m.rAF=requestAnimationFrame(m.count):m.callback&&m.callback()},m.start=function(t){return m.callback=t,m.rAF=requestAnimationFrame(m.count),!1},m.pauseResume=function(){m.paused?(m.paused=!1,delete m.startTime,m.duration=m.remaining,m.startVal=m.frameVal,requestAnimationFrame(m.count)):(m.paused=!0,cancelAnimationFrame(m.rAF))},m.reset=function(){m.paused=!1,delete m.startTime,m.startVal=e,cancelAnimationFrame(m.rAF),m.printValue(m.startVal)},m.update=function(t){cancelAnimationFrame(m.rAF),m.paused=!1,delete m.startTime,m.startVal=m.frameVal,m.endVal=Number(t),m.countDown=m.startVal>m.endVal,m.rAF=requestAnimationFrame(m.count)},m.printValue(m.startVal)}})?r.call(e,a,e,t):r)||(t.exports=n)}});