{"version":3,"sources":["webpack:///src/pages/system/service-type.vue","webpack:///./src/pages/system/service-type.vue?4efc","webpack:///./src/pages/system/service-type.vue"],"names":["service_type","name","computed","uploadUrl","localStorage","getItem","data","_this2","this","uploadingModal","uploadPercent","modalTitle","serviceModal","filter","tableColumn","title","key","align","render","h","params","_this","props","type","size","on","click","id","row","getTypeInfo","deleteType","lists","repairLists","typeForm","repairCategoryId","warrantyPeriod","serviceFee","employeeServiceCommission","typeFormRule","required","message","trigger","serviceFilter","warrantyPeriodFlag","methods","activeModalNew","filterData","getServiceList","clearFilter","_this3","substr","length","console","log","$http","get","then","res","code","$Message","error","msg","_this4","gerRepairList","_this5","saveType","_this6","url","post","extends_default","success","_this7","delete","info","modalHide","value","$refs","resetFields","downExcel","window","location","href","uploadSuccess","file","fileLists","_this8","setTimeout","uploading","timer","setInterval","clearTimeout","mounted","system_service_type","_vm","_h","$createElement","_c","_self","staticClass","attrs","icon","_v","$event","action","with-credentials","show-upload-list","on-success","before-upload","columns","on-visible-change","model","callback","$$v","expression","ref","rules","label-position","label","prop","$set","_l","repair","_s","staticStyle","width","min","formatter","parseInt","parse","toFixed","slot","mask-closable","footer-hide","closable","percent","status","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/39.7295ca0f1e43311e0fff.js","sourcesContent":["<style scoped lang=\"scss\">\n  @import \"./system.scss\";\n</style>\n\n<template>\n    <div>\n      <Card>\n        <div>\n          <div class=\"clearfix mb-15\">\n            <div class=\"pull-left\">\n              <Button icon=\"md-add\" @click=\"activeModalNew\">新建</Button>\n              <Button icon=\"ios-funnel\" @click=\"filter=true\" >筛选</Button>\n            </div>\n            <div class=\"pull-right\">\n              <Button icon=\"ios-cloud-download-outline\" @click=\"downExcel\">excel导入模板下载</Button>\n              <div class=\"inline-block\">\n                <Upload :action=\"uploadUrl\" :with-credentials=\"true\" :show-upload-list=\"false\"\n                       :on-success=\"uploadSuccess\"\n                        :before-upload=\"uploading\"\n                >\n                  <Button icon=\"ios-cloud-upload-outline\">excel导入</Button>\n                </Upload>\n              </div>\n            </div>\n          </div>\n          <div class=\"table-wrapper\">\n            <Table :data=\"lists\" :columns=\"tableColumn\" ></Table>\n          </div>\n        </div>\n      </Card>\n      <!--报修弹窗-->\n      <Modal v-model=\"serviceModal\"\n        :title=\"modalTitle\"\n             @on-visible-change=\"modalHide\"\n      >\n        <div class=\"modal_wrap_form\">\n          <Form ref=\"typeForm\" :model=\"typeForm\"  :rules=\"typeFormRule\" label-position=\"top\">\n            <FormItem label=\"报修分类\" prop=\"repairCategoryId\">\n              <Select v-model=\"typeForm.repairCategoryId\">\n                <Option v-for=\"repair in repairLists\" :key=\"repair.id\" :value=\"repair.id\">{{repair.name}}</Option>\n              </Select>\n            </FormItem>\n            <FormItem label=\"服务名称\"  prop=\"name\">\n              <Input v-model=\"typeForm.name\"/>\n            </FormItem>\n            <FormItem label=\"质保天数\"  prop=\"warrantyPeriod\">\n              <!--<Input v-model=\"typeForm.warrantyPeriod\" />-->\n              <InputNumber  style=\"width:100%;\" v-model=\"typeForm.warrantyPeriod\"  :min=\"1\"\n                            :formatter=\"value=>parseInt(value)\"\n                :parse=\"value=>parseInt(value)\"\n              ></InputNumber>\n            </FormItem>\n            <FormItem label=\"服务收费\"  prop=\"serviceFee\">\n              <!--<Input   v-model=\"typeForm.serviceFee\" />-->\n              <InputNumber  style=\"width:100%;\" v-model=\"typeForm.serviceFee\"\n                            :parse=\"value=>value.toFixed(2)\"\n              ></InputNumber>\n            </FormItem>\n            <FormItem label=\"员工结算标准\"  prop=\"employeeServiceCommission\">\n              <!--<Input  v-model=\"typeForm.employeeServiceCommission\"/>-->\n              <InputNumber\n                style=\"width:100%;\"\n                v-model=\"typeForm.employeeServiceCommission\"\n                :parse=\"value=>value.toFixed(2)\"\n              ></InputNumber>\n            </FormItem>\n          </Form>\n        </div>\n        <div slot=\"footer\">\n          <Button @click=\"serviceModal=false\">取消</Button>\n          <Button @click=\"saveType\" type=\"primary\">{{modalTitle===1?'添加':'保存'}}</Button>\n        </div>\n      </Modal>\n      <!--报修筛选-->\n      <Drawer title=\"服务筛选\"  v-model=\"filter\" width=\"425\">\n        <div class=\"filter-top mb-15 clearfix\">\n          <div class=\"pull-left\">\n            <Button @click=\"clearFilter\" icon=\"md-close-circle\">清空筛选条件</Button>\n          </div>\n          <div class=\"pull-right\">\n            <Button @click=\"filterData\" type=\"primary\">确定筛选</Button>\n          </div>\n        </div>\n        <Form v-model=\"serviceFilter\" >\n          <FormItem label=\"报修分类\">\n            <Select v-model=\"serviceFilter.repairCategoryId\">\n              <Option :key=\"repair.id\" v-for=\"repair in repairLists\" :value=\"repair.id\">{{repair.name}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem label=\"服务名称\">\n            <Input v-model=\"serviceFilter.name\"/>\n          </FormItem>\n          <FormItem label=\"质保天数大于0\">\n            <i-switch v-model=\"serviceFilter.warrantyPeriodFlag\"  />\n          </FormItem>\n        </Form>\n\n      </Drawer>\n      <!--正在上传中-->\n      <Modal v-model=\"uploadingModal\" title=\"正在上传中...\" :mask-closable=\"false\" :footer-hide=\"true\" :closable=\"false\">\n        <Progress :percent=\"uploadPercent\" status=\"active\" />\n      </Modal>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: \"service-type\",\n      computed:{\n        uploadUrl:function(){\n          let baseUrl=localStorage.getItem('baseURL');\n          let url = baseUrl+'/repair/service/category/import';\n          return url;\n        }\n      },\n      data(){\n          return {\n            uploadingModal:false,\n            uploadPercent:0,\n            modalTitle:'新建服务分类', //1：新建，0：编辑\n            serviceModal:false,\n            filter:false, //筛选\n            tableColumn:[\n              {\n                title:'服务名称',\n                key:'name',\n                align:'center'\n              },{\n                title:'报修分类',\n                key:'repairCategoryName',\n                align:'center'\n              },{\n                title:'质保天数',\n                key:'warrantyPeriod',\n                align:'center'\n              },{\n                title:'客户收费标准',\n                key:'serviceFee',\n                align:'center'\n              },{\n                title:'员工结算标准',\n                key:'employeeServiceCommission',\n                align:'center'\n              },{\n                title:'操作',\n                align:'center',\n                render:(h,params)=>{\n                  let _this = this;\n                  return h('div',[\n                    h('Button',{\n                      props:{\n                        type:'text',\n                        size:'small'\n                      },\n                      on:{\n                        click(){\n                          let id = params.row.id;\n                          _this.getTypeInfo(id);\n                          _this.serviceModal=true;\n                          _this.modalTitle='编辑服务分类';\n                        }\n                      }\n                    },'编辑'),\n                    h('Button',{\n                      props:{\n                        type:'text',\n                        size:'small'\n                      },\n                      on:{\n                        click(){\n                          let id = params.row.id;\n                          _this.deleteType(id);\n                        }\n                      }\n                    },'删除'),\n\n                  ])\n                }\n              },\n            ],\n            lists:[],\n            repairLists:[], //报修分类，用于下拉选择\n            typeForm:{\n              id:'',\n              repairCategoryId:'',\n              name:'',\n              warrantyPeriod:0,\n              serviceFee:0,\n              employeeServiceCommission:0,\n            },\n            typeFormRule:{\n              name:[{required:true,message:'请输入服务名称',trigger:'blur'}],\n              repairCategoryId:[{required:true,message:'请选择报修分类',trigger:'blur'}],\n              warrantyPeriod:[{required:true,message:'请设置质保天数',trigger:'blur',type:'number'}],\n              serviceFee:[\n                {required:true,message:'请设置服务收费标准',trigger:'blur',type:'number'},\n                // {validator:inputNumValidator,trigger:'blur'}\n              ],\n              employeeServiceCommission:[\n                {required:true,message:'请设置员工结算标准',trigger:'blur',type:'number'},\n                // {validator:inputNumValidator,trigger:'blur'}\n              ],\n            },\n            serviceFilter:{\n              name:'',\n              warrantyPeriodFlag:true,\n              repairCategoryId:''\n            }\n          }\n      },\n      methods:{\n          activeModalNew(){\n            this.modalTitle='新建服务分类';\n            this.typeForm={\n              id:'',\n              repairCategoryId:'',\n              name:'',\n              warrantyPeriod:0,\n              serviceFee:0,\n              employeeServiceCommission:0,\n            };\n            this.serviceModal=true;\n\n          },\n          //筛选搜索名称\n          filterData(){\n            let data =this.serviceFilter;\n            let filter = {\n              name:data.name,\n              warrantyPeriodFlag:data.warrantyPeriodFlag?'Y':'N',\n              repairCategoryId:data.repairCategoryId\n            };\n             this.getServiceList(filter);\n            this.filter=false;\n          },\n        //清空筛选\n        clearFilter(){\n          this.serviceFilter={\n            name:'',\n            warrantyPeriodFlag:true,\n            repairCategoryId:''\n          };\n          this.filter=false;\n          this.getServiceList();\n        },\n          getServiceList(filterData){\n            let params = '';\n            if(filterData){\n              for(let key in filterData){\n                let item =key+'='+filterData[key]+'&';\n                params+=item;\n              }\n              params = params.substr(0,params.length-2);\n              console.log(params)\n            }\n            this.$http.get(`/repair/service/category/list?${params}`)\n              .then(res=>{\n                if(res.data.code===0){\n                  this.lists=res.data.data;\n                }else{\n                  this.$Message.error(res.data.msg);\n                }\n              })\n          },\n          getTypeInfo(id){\n              this.$http.get(`/repair/service/category/info?id=${id}`)\n                .then(res=>{\n                  if(res.data.code===0){\n                    let data = res.data.data;\n                    console.log(res.data.data)\n                    this.typeForm=data;\n                  }else{\n                    this.$Message.error(res.data.msg);\n                  }\n                })\n          },\n          //获取报修分类列表\n          gerRepairList(){\n            this.$http.get(`/repair/category/list`)\n              .then(res=>{\n                if(res.data.code===0){\n                  this.repairLists=res.data.data;\n                }else{\n                  this.$Message.error(res.data.msg);\n                }\n              });\n          },\n        saveType(){\n            let typeForm= this.typeForm;\n            let url='';\n            if(typeForm.id.length>0){\n              url='/repair/service/category/edit'\n            }else{\n              url='/repair/service/category/add'\n            }\n            this.$http.post(url,{\n              ...typeForm\n            }).then(res=>{\n              if(res.data.code===0){\n                this.$Message.success('保存成功');\n                this.getServiceList();\n              }else{\n                this.$Message.error(res.data.msg);\n              }\n              this.serviceModal=false;\n            });\n            console.log(typeForm);\n        },\n        deleteType(id){\n            this.$http.delete(`/repair/service/category/delete?id=${id}`)\n              .then(res=>{\n                if(res.data.code===0){\n                  this.$Message.info('删除成功');\n                  this.getServiceList();\n                }else{\n                  this.$Message.info(res.data.msg)\n                }\n              })\n        },\n        modalHide(value){\n            if(!value){\n              this.$refs['typeForm'].resetFields();\n            }\n        },\n        //下载excel\n        downExcel(){\n            let baseUrl=localStorage.getItem('baseURL');\n            let url = baseUrl+'/repair/service/category/import/template';\n            window.location.href=url;\n        },\n        //上传回调\n        uploadSuccess(res,file,fileLists){\n          setTimeout(()=>{\n            if(res.code===0){\n              this.$Message.success('上传成功');\n            }else{\n              this.$Message.error(res.msg);\n            }\n            this.uploadPercent=100;\n            this.uploadingModal=false;\n            this.getServiceList();\n          },1500)\n        },\n        //正在上传效果\n        uploading(){\n          this.uploadingModal=true;\n          let _this=this;\n          let timer = setInterval(()=>{\n            if(_this.uploadPercent>=90){\n              clearTimeout(timer);\n            }else{\n              _this.uploadPercent=_this.uploadPercent+5;\n            }\n          },100);\n        }\n\n      },\n      mounted(){\n          this.getServiceList();\n          this.gerRepairList();\n      }\n    }\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/pages/system/service-type.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Card',[_c('div',[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{attrs:{\"icon\":\"md-add\"},on:{\"click\":_vm.activeModalNew}},[_vm._v(\"新建\")]),_vm._v(\" \"),_c('Button',{attrs:{\"icon\":\"ios-funnel\"},on:{\"click\":function($event){_vm.filter=true}}},[_vm._v(\"筛选\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"icon\":\"ios-cloud-download-outline\"},on:{\"click\":_vm.downExcel}},[_vm._v(\"excel导入模板下载\")]),_vm._v(\" \"),_c('div',{staticClass:\"inline-block\"},[_c('Upload',{attrs:{\"action\":_vm.uploadUrl,\"with-credentials\":true,\"show-upload-list\":false,\"on-success\":_vm.uploadSuccess,\"before-upload\":_vm.uploading}},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"excel导入\")])],1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"table-wrapper\"},[_c('Table',{attrs:{\"data\":_vm.lists,\"columns\":_vm.tableColumn}})],1)])]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modalTitle},on:{\"on-visible-change\":_vm.modalHide},model:{value:(_vm.serviceModal),callback:function ($$v) {_vm.serviceModal=$$v},expression:\"serviceModal\"}},[_c('div',{staticClass:\"modal_wrap_form\"},[_c('Form',{ref:\"typeForm\",attrs:{\"model\":_vm.typeForm,\"rules\":_vm.typeFormRule,\"label-position\":\"top\"}},[_c('FormItem',{attrs:{\"label\":\"报修分类\",\"prop\":\"repairCategoryId\"}},[_c('Select',{model:{value:(_vm.typeForm.repairCategoryId),callback:function ($$v) {_vm.$set(_vm.typeForm, \"repairCategoryId\", $$v)},expression:\"typeForm.repairCategoryId\"}},_vm._l((_vm.repairLists),function(repair){return _c('Option',{key:repair.id,attrs:{\"value\":repair.id}},[_vm._v(_vm._s(repair.name))])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务名称\",\"prop\":\"name\"}},[_c('Input',{model:{value:(_vm.typeForm.name),callback:function ($$v) {_vm.$set(_vm.typeForm, \"name\", $$v)},expression:\"typeForm.name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"质保天数\",\"prop\":\"warrantyPeriod\"}},[_c('InputNumber',{staticStyle:{\"width\":\"100%\"},attrs:{\"min\":1,\"formatter\":function (value){ return parseInt(value); },\"parse\":function (value){ return parseInt(value); }},model:{value:(_vm.typeForm.warrantyPeriod),callback:function ($$v) {_vm.$set(_vm.typeForm, \"warrantyPeriod\", $$v)},expression:\"typeForm.warrantyPeriod\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务收费\",\"prop\":\"serviceFee\"}},[_c('InputNumber',{staticStyle:{\"width\":\"100%\"},attrs:{\"parse\":function (value){ return value.toFixed(2); }},model:{value:(_vm.typeForm.serviceFee),callback:function ($$v) {_vm.$set(_vm.typeForm, \"serviceFee\", $$v)},expression:\"typeForm.serviceFee\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"员工结算标准\",\"prop\":\"employeeServiceCommission\"}},[_c('InputNumber',{staticStyle:{\"width\":\"100%\"},attrs:{\"parse\":function (value){ return value.toFixed(2); }},model:{value:(_vm.typeForm.employeeServiceCommission),callback:function ($$v) {_vm.$set(_vm.typeForm, \"employeeServiceCommission\", $$v)},expression:\"typeForm.employeeServiceCommission\"}})],1)],1)],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{on:{\"click\":function($event){_vm.serviceModal=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveType}},[_vm._v(_vm._s(_vm.modalTitle===1?'添加':'保存'))])],1)]),_vm._v(\" \"),_c('Drawer',{attrs:{\"title\":\"服务筛选\",\"width\":\"425\"},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}},[_c('div',{staticClass:\"filter-top mb-15 clearfix\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{attrs:{\"icon\":\"md-close-circle\"},on:{\"click\":_vm.clearFilter}},[_vm._v(\"清空筛选条件\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.filterData}},[_vm._v(\"确定筛选\")])],1)]),_vm._v(\" \"),_c('Form',{model:{value:(_vm.serviceFilter),callback:function ($$v) {_vm.serviceFilter=$$v},expression:\"serviceFilter\"}},[_c('FormItem',{attrs:{\"label\":\"报修分类\"}},[_c('Select',{model:{value:(_vm.serviceFilter.repairCategoryId),callback:function ($$v) {_vm.$set(_vm.serviceFilter, \"repairCategoryId\", $$v)},expression:\"serviceFilter.repairCategoryId\"}},_vm._l((_vm.repairLists),function(repair){return _c('Option',{key:repair.id,attrs:{\"value\":repair.id}},[_vm._v(_vm._s(repair.name))])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务名称\"}},[_c('Input',{model:{value:(_vm.serviceFilter.name),callback:function ($$v) {_vm.$set(_vm.serviceFilter, \"name\", $$v)},expression:\"serviceFilter.name\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"质保天数大于0\"}},[_c('i-switch',{model:{value:(_vm.serviceFilter.warrantyPeriodFlag),callback:function ($$v) {_vm.$set(_vm.serviceFilter, \"warrantyPeriodFlag\", $$v)},expression:\"serviceFilter.warrantyPeriodFlag\"}})],1)],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"正在上传中...\",\"mask-closable\":false,\"footer-hide\":true,\"closable\":false},model:{value:(_vm.uploadingModal),callback:function ($$v) {_vm.uploadingModal=$$v},expression:\"uploadingModal\"}},[_c('Progress',{attrs:{\"percent\":_vm.uploadPercent,\"status\":\"active\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3130946b\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/system/service-type.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3130946b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./service-type.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./service-type.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./service-type.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3130946b\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./service-type.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3130946b\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/system/service-type.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}