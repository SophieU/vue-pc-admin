webpackJsonp([20],{eaB6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),r={name:"order-control",data:function(){return{currentCon:"",id:"",reasonLists:[],cancelReason:"",selectLists:[]}},methods:{demandChange:function(e){switch(console.log(e),e){case"cancel":this.currentCon="cancel";break;case"after":this.currentCon="after";break;default:this.currentCon=""}},cancelOrder:function(){var e=this,t={reasonId:this.cancelReason};this.$http.post("/repair/order/cancel?id="+this.id+"&reasonId="+this.cancelReason,n()({},t)).then(function(t){0===t.data.code?(e.$Message.success("取消成功"),e.$router.push({name:"order_filter"})):e.$Message.error("取消失败，"+t.data.msg)})},startAfter:function(){var e=this;this.$http.post("/repair/order/after/sale/add?id="+this.id).then(function(t){0===t.data.code?(e.$Message.success("售后发起成功"),e.$router.push({name:"order_filter"})):e.$Message.error("发起失败:"+t.data.msg)})},getCancelReason:function(){var e=this;this.$http.post("/repair/order/cancel/reason/list").then(function(t){0===t.data.code?e.reasonLists=t.data.data:console.log("取消原因获取失败："+t.data.msg)})},setControl:function(){var e=this.state,t=(this.$route.query.isWarranty,[]);["待上门","待分配"].indexOf(e)>-1&&t.push({name:"取消订单",value:"cancel"}),["已完成"].indexOf(e)>-1&&t.push({name:"发起售后",value:"after"}),this.selectLists=t}},mounted:function(){var e=this.$route.query.id;this.state=this.$route.query.state,this.id=e,this.getCancelReason(),this.setControl()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"order-control"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"control-flex"},[a("div",{staticClass:"label-title"},[e._v("用户述求：")]),e._v(" "),a("div",{staticClass:"select-wrap"},[a("Select",{staticClass:"mb-15",staticStyle:{width:"200px",display:"block"},on:{"on-change":e.demandChange}},e._l(e.selectLists,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.name))])})),e._v(" "),"cancel"===e.currentCon?a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择取消原因"},model:{value:e.cancelReason,callback:function(t){e.cancelReason=t},expression:"cancelReason"}},e._l(e.reasonLists,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.reasonName))])})):e._e()],1),e._v(" "),a("div",{staticClass:"btn-wrap"},["cancel"===e.currentCon?a("Button",{attrs:{type:"primary"},on:{click:e.cancelOrder}},[e._v("取消工单")]):e._e(),e._v(" "),"after"===e.currentCon?a("Button",{attrs:{type:"primary"},on:{click:e.startAfter}},[e._v("发起售后")]):e._e()],1)])])])])},staticRenderFns:[]};var i=a("VU/8")(r,c,!1,function(e){a("ilIj")},"data-v-a842e114",null);t.default=i.exports},ilIj:function(e,t){}});
//# sourceMappingURL=20.900357cf9d1085b89b43.js.map