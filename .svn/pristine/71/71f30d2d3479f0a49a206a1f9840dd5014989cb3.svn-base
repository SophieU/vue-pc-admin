{"version":3,"sources":["webpack:///src/pages/source/inventory-admin.vue","webpack:///./src/pages/source/inventory-admin.vue?3bfb","webpack:///./src/pages/source/inventory-admin.vue"],"names":["inventory_admin","name","computed","downlink","localStorage","getItem","data","_this2","this","filter","columns","title","key","align","render","h","params","_this","props","type","on","click","id","row","$router","push","lists","pageNo","pageSize","totalCount","departmentLists","filterForm","departmentId","dateRange","methods","downloadExcel","extends_default","query","param","util","formatterParams","$http","post","responseType","then","res","blob","Blob","downloadElement","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","removeChild","revokeObjectURL","newInvent","getLists","_this3","code","list","filterList","startTime","formateTime","endTime","clearFilter","pageChange","val","pageSizeChange","mounted","_this4","getDepartment","source_inventory_admin","_vm","_h","$createElement","_c","_self","staticClass","attrs","_v","$event","total","show-sizer","show-elevator","on-change","on-page-size-change","width","model","value","callback","$$v","expression","label-position","label","staticStyle","$set","_l","department","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/42.4d362256487d184e8749.js","sourcesContent":["<template>\n  <Card>\n    <div class=\"clearfix mb-15\">\n      <div class=\"pull-left\">\n        <Button type=\"primary\" @click=\"newInvent\">新建盘点</Button>\n        <Button @click=\"filter=true\">筛选</Button>\n      </div>\n      <div class=\"pull-right\">\n        <Button @click=\"downloadExcel\" type=\"primary\">excel导出</Button>\n      </div>\n    </div>\n    <div class=\"table-wrapper\">\n      <Table :columns=\"columns\" :data=\"lists\"></Table>\n      <div class=\"pagination\">\n        <Page :total=\"totalCount\" show-sizer show-elevator\n          @on-change=\"pageChange\"\n              @on-page-size-change=\"pageSizeChange\"\n        ></Page>\n      </div>\n    </div>\n\n    <!--筛选-->\n    <Drawer title=\"出库筛选\" width=\"425\" v-model=\"filter\">\n      <div class=\"clearfix mb-15\">\n        <div class=\"pull-left\">\n          <Button @click=\"clearFilter\">清空筛选条件</Button>\n        </div>\n        <div class=\"pull-right\">\n          <Button @click=\"filterList\" type=\"primary\">确定筛选</Button>\n        </div>\n      </div>\n      <div>\n        <Form :model=\"filterForm\" label-position=\"top\">\n          <FormItem label=\"创建时间\">\n            <DatePicker v-model=\"filterForm.dateRange\" type=\"daterange\" style=\"width: 100%;\"></DatePicker>\n          </FormItem>\n          <FormItem label=\"组织名称\">\n            <Select v-model=\"filterForm.departmentId\">\n              <Option v-for=\"department in departmentLists\" :key=\"department.id\" :value=\"department.id\">{{department.name}}</Option>\n            </Select>\n          </FormItem>\n        </Form>\n      </div>\n    </Drawer>\n  </Card>\n</template>\n\n<script>\n  import util from '../../libs/util'\n    export default {\n        name: \"inventory-admin\",\n      computed:{\n        downlink(){\n          let baseUrl = localStorage.getItem('baseURL');\n          let url = baseUrl+'/repair/material/check/order/export';\n        }\n      },\n      data(){\n          return {\n            filter:false,\n            columns:[\n              {title:'组织名称',key:'departmentName',align:'center'},\n              {title:'单号',key:'orderSn',align:'center'},\n              {title:'创建时间',key:'createTime',align:'center'},\n              {title:'盈亏数',key:'diffNum',align:'center'},\n              {title:'盈亏成本',key:'amount',align:'center'},\n              {title:'操作',align:'center',render:(h,params)=>{\n                let _this= this;\n                return h('Button',{\n                    props:{\n                      type:'text'\n                    },\n                    on:{\n                      click(){\n                        let id = params.row.id;\n                        _this.$router.push({name:'inventoryDetail',params:{id:id}})\n                      }\n                    }\n                  },'查看')\n                }},\n            ],\n            lists:[],\n            pageNo:1,\n            pageSize:10,\n            totalCount:0,\n            departmentLists:[], //组织列表\n            filterForm:{\n              departmentId:'',\n              dateRange:[],\n            }\n          }\n      },\n      methods:{\n        downloadExcel(){\n          let filterForm = {...this.filterForm};\n          let query =`pageNo=${this.pageNo}&pageSize=${this.pageSize}`;\n          delete filterForm.dateRange;\n          let param = util.formatterParams(filterForm);\n          this.$http.post(`/repair/material/check/order/list/export?${query}'&'${param}`,{responseType:'blob'})\n            .then(res=>{\n              let blob = new Blob([res.data], {type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8'}); //application/vnd.openxmlformats-officedocument.spreadsheetml.sheet这里表示xlsx类型\n              let downloadElement = document.createElement('a');\n              let href = window.URL.createObjectURL(blob); //创建下载的链接\n              downloadElement.href = href;\n              downloadElement.download = '辅材盘点列表.xlsx'; //下载后文件名\n              document.body.appendChild(downloadElement);\n              downloadElement.click(); //点击下载\n              document.body.removeChild(downloadElement); //下载完成移除元素\n              window.URL.revokeObjectURL(href); //释放掉blob对象\n            })\n          // window.location.href=this.downLink;\n        },\n        newInvent(){\n          this.$router.push({name:'inventoryNew'})\n        },\n        /*getOrgan(){\n          this.$http.get(`/repair/material/check/order/departmentList`)\n            .then(res=>{\n              if(res.data.code===0){\n                this.departmentLists=res.data.data;\n              }else{\n                console.log('辅料盘点组织列表获取失败：'+res.data.msg);\n              }\n            })\n        },*/\n        getLists(filter){\n          let params= `pageNo=${this.pageNo}&pageSize=${this.pageSize}`;\n          if(filter){\n            params=params+'&'+util.formatterParams(filter);\n          }\n          this.$http.post(`/repair/material/check/order/list?${params}`)\n            .then(res=>{\n              if(res.data.code===0){\n                let data = res.data.data;\n                this.lists = data.list;\n                this.pageNo = data.pageNo;\n                this.totalCount=data.totalCount;\n                this.pageSize= data.pageSize;\n                this.filter=false;\n              }\n            })\n        },\n        filterList(){\n            let filterForm = this.filterForm;\n            let param = {};\n            if(filterForm.departmentId){\n              param.departmentId=filterForm.departmentId;\n            }\n            if(filterForm.dateRange[0]&&filterForm.dateRange[0]){\n              let dateRange = filterForm.dateRange;\n              param.startTime=util.formateTime(dateRange[0],true);\n              param.endTime=util.formateTime(dateRange[1],true);\n            }\n\n            this.getLists(param);\n        },\n        //清空筛选\n        clearFilter(){\n          this.filterForm={\n            dateRange:[],\n            departmentId:'',\n          };\n          this.filter=false;\n        },\n        pageChange(val){\n          this.pageNo=val;\n          this.getLists();\n        },\n        pageSizeChange(val){\n          this.pageSize=val;\n          this.getLists();\n        }\n      },\n      mounted(){\n          // this.getOrgan();\n        util.getDepartment(data=>{\n          this.departmentLists=data;\n        })\n          this.getLists();\n      }\n    }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/source/inventory-admin.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.newInvent}},[_vm._v(\"新建盘点\")]),_vm._v(\" \"),_c('Button',{on:{\"click\":function($event){_vm.filter=true}}},[_vm._v(\"筛选\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.downloadExcel}},[_vm._v(\"excel导出\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"table-wrapper\"},[_c('Table',{attrs:{\"columns\":_vm.columns,\"data\":_vm.lists}}),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('Page',{attrs:{\"total\":_vm.totalCount,\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":_vm.pageChange,\"on-page-size-change\":_vm.pageSizeChange}})],1)],1),_vm._v(\" \"),_c('Drawer',{attrs:{\"title\":\"出库筛选\",\"width\":\"425\"},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}},[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{on:{\"click\":_vm.clearFilter}},[_vm._v(\"清空筛选条件\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.filterList}},[_vm._v(\"确定筛选\")])],1)]),_vm._v(\" \"),_c('div',[_c('Form',{attrs:{\"model\":_vm.filterForm,\"label-position\":\"top\"}},[_c('FormItem',{attrs:{\"label\":\"创建时间\"}},[_c('DatePicker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"daterange\"},model:{value:(_vm.filterForm.dateRange),callback:function ($$v) {_vm.$set(_vm.filterForm, \"dateRange\", $$v)},expression:\"filterForm.dateRange\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"组织名称\"}},[_c('Select',{model:{value:(_vm.filterForm.departmentId),callback:function ($$v) {_vm.$set(_vm.filterForm, \"departmentId\", $$v)},expression:\"filterForm.departmentId\"}},_vm._l((_vm.departmentLists),function(department){return _c('Option',{key:department.id,attrs:{\"value\":department.id}},[_vm._v(_vm._s(department.name))])}))],1)],1)],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1f461e2c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/source/inventory-admin.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1f461e2c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./inventory-admin.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./inventory-admin.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./inventory-admin.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1f461e2c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./inventory-admin.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1f461e2c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/source/inventory-admin.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}