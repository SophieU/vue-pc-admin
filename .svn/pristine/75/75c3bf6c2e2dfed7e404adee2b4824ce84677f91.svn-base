webpackJsonp([48],{CcJQ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),r=a("TVG1"),o={name:"inventory-admin",computed:{downlink:function(){localStorage.getItem("baseURL")}},data:function(){var t=this;return{filter:!1,columns:[{title:"组织名称",key:"departmentName",align:"center"},{title:"单号",key:"orderSn",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"盈亏数",key:"diffNum",align:"center"},{title:"盈亏成本",key:"amount",align:"center"},{title:"操作",align:"center",render:function(e,a){var i=t;return e("Button",{props:{type:"text"},on:{click:function(){var t=a.row.id;i.$router.push({name:"inventoryDetail",params:{id:t}})}}},"查看")}}],lists:[],pageNo:1,pageSize:10,totalCount:0,departmentLists:[],filterForm:{departmentId:"",dateRange:[]}}},methods:{downloadExcel:function(){var t=n()({},this.filterForm),e="pageNo="+this.pageNo+"&pageSize="+this.pageSize;delete t.dateRange;var a=r.a.formatterParams(t);this.$http.post("/repair/material/check/order/list/export?"+e+"'&'"+a,{responseType:"blob"}).then(function(t){var e=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a"),i=window.URL.createObjectURL(e);a.href=i,a.download="辅材盘点列表.xlsx",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)})},newInvent:function(){this.$router.push({name:"inventoryNew"})},getOrgan:function(){var t=this;this.$http.get("/repair/material/check/order/departmentList").then(function(e){0===e.data.code?t.departmentLists=e.data.data:console.log("辅料盘点组织列表获取失败："+e.data.msg)})},getLists:function(t){var e=this,a="pageNo="+this.pageNo+"&pageSize="+this.pageSize;t&&(a=a+"&"+r.a.formatterParams(t)),this.$http.post("/repair/material/check/order/list?"+a).then(function(t){if(0===t.data.code){var a=t.data.data;e.lists=a.list,e.pageNo=a.pageNo,e.totalCount=a.totalCount,e.pageSize=a.pageSize,e.filter=!1}})},filterList:function(){var t=this.filterForm,e={};if(t.departmentId&&(e.departmentId=t.departmentId),t.dateRange[0]&&t.dateRange[0]){var a=t.dateRange;e.startTime=r.a.formateTime(a[0],!0),e.endTime=r.a.formateTime(a[1],!0)}this.getLists(e)},clearFilter:function(){this.filterForm={dateRange:[],departmentId:""},this.filter=!1},pageChange:function(t){this.pageNo=t,this.getLists()},pageSizeChange:function(t){this.pageSize=t,this.getLists()}},mounted:function(){this.getOrgan(),this.getLists()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{attrs:{type:"primary"},on:{click:t.newInvent}},[t._v("新建盘点")]),t._v(" "),a("Button",{on:{click:function(e){t.filter=!0}}},[t._v("筛选")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.downloadExcel}},[t._v("excel导出")])],1)]),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("Table",{attrs:{columns:t.columns,data:t.lists}}),t._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{total:t.totalCount,"show-sizer":"","show-elevator":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1),t._v(" "),a("Drawer",{attrs:{title:"出库筛选",width:"425"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.filterList}},[t._v("确定筛选")])],1)]),t._v(" "),a("div",[a("Form",{attrs:{model:t.filterForm,"label-position":"top"}},[a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange"},model:{value:t.filterForm.dateRange,callback:function(e){t.$set(t.filterForm,"dateRange",e)},expression:"filterForm.dateRange"}})],1),t._v(" "),a("FormItem",{attrs:{label:"组织名称"}},[a("Select",{model:{value:t.filterForm.departmentId,callback:function(e){t.$set(t.filterForm,"departmentId",e)},expression:"filterForm.departmentId"}},t._l(t.departmentLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(o,l,!1,function(t){a("vd6a")},"data-v-0546a62b",null);e.default=s.exports},vd6a:function(t,e){}});
//# sourceMappingURL=48.454767ba4d55f7cc9de4.js.map