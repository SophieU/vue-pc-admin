webpackJsonp([45],{WgNQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),r=i.n(a),n=i("woOf"),s=i.n(n),l=i("TVG1"),o={name:"visite",data:function(){var t=this;return{filter:!1,tabActive:"visited",waiting:function(t){return t("div",[t("span","待回访"),t("Badge",{props:{count:1},style:{marginLeft:"10px"}})])},visited:function(t){return t("div",[t("span","已回访"),t("Badge",{props:{count:1},style:{marginLeft:"10px"}})])},waitColumns:[{title:"工单编号",key:"id",align:"center"},{title:"售后回访",key:"id",align:"center"},{title:"工单状态",key:"id",align:"center"},{title:"报修类型",key:"id",align:"center"},{title:"服务网点",key:"id",align:"center"},{title:"接单师傅",key:"id",align:"center"},{title:"创建日期",key:"id",align:"center"}],waitData:[],visitedColumns:[{title:"工单编号",key:"orderSn",align:"center"},{title:"售后回访",key:"afterSaleVisit",align:"center"},{title:"工单状态",key:"orderState",align:"center"},{title:"报修类型",key:"repairCategoryName",align:"center"},{title:"服务网点",key:"repairStationName",align:"center"},{title:"接单师傅",key:"receiveUserName",align:"center"},{title:"创建日期",key:"createTime",align:"center"},{title:"回访结果",key:"returnVisitResult",align:"center"},{title:"操作",align:"center",render:function(e,i){var a=t;return e("Button",{props:{type:"text"},on:{click:function(){var t=i.row.id;a.$router.push({name:"visitedInfo",params:{id:t}})}}},"查看")}}],lists:[],stationLists:[],pageNo:1,pageSize:10,totalCount:0,filterForm:{}}},methods:{getLists:function(t){var e=this,i="pageNo="+this.pageNo+"&pageSize="+this.pageSize,a={};"visited"===this.tabActive?a.isReturnVisit="Y":"waiting"===this.tabActive&&(a.isReturnVisit="N"),t&&(a=s()({},t,a)),this.$http.post("/repair/return/visit/list?"+i,r()({},a)).then(function(t){if(0===t.data.code){var i=t.data.data;e.pageSize=i.pageSize,e.totalCount=i.totalCount,e.lists=i.list,e.filter=!1}else console.log("回访列表获取失败："+t.data.msg)})},visitedPageChange:function(t){this.pageNo=t,this.getLists()},visitedPageSizeChange:function(t){this.pageSize=t,this.getLists()},dateRangeChange:function(t){this.filterForm.startTime=t[0],this.filterForm.endTime=t[1]},clearFilter:function(){this.filterForm={},this.filter=!1,this.getLists()},sureFilter:function(){var t=r()({},this.filterForm);delete t.dateRange,this.getLists(t)}},mounted:function(){var t=this;this.getLists(),l.a.getStationLists(function(e){t.stationLists=e})},watch:{tabActive:function(t){this.getLists()}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Card",[i("Tabs",{attrs:{animated:!1},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[i("TabPane",{attrs:{label:t.visited,name:"visited"}},[i("div",{staticClass:"mb-15 clearfix"},[i("div",{staticClass:"pull-right"},[i("Button",{attrs:{type:"primary"},on:{click:function(e){t.filter=!0}}},[t._v("筛选")])],1)]),t._v(" "),i("Table",{attrs:{columns:t.visitedColumns,data:t.lists}})],1),t._v(" "),i("TabPane",{staticStyle:{"padding-bottom":"30px"},attrs:{label:t.waiting,name:"waiting"}},[i("Table",{attrs:{columns:t.waitColumns,data:t.waitData}})],1)],1),t._v(" "),i("div",{staticClass:"pagination"},[i("Page",{attrs:{total:t.totalCount,"show-sizer":"","show-elevator":""},on:{"on-change":t.visitedPageChange,"on-page-size-change":t.visitedPageSizeChange}})],1),t._v(" "),i("Drawer",{attrs:{width:"450",title:"工单筛选"},on:{"on-close":t.clearFilter},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[i("div",{staticClass:"clearfix mb-15"},[i("div",{staticClass:"pull-left"},[i("Button",{on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1),t._v(" "),i("div",{staticClass:"pull-right"},[i("Button",{attrs:{type:"primary"},on:{click:t.sureFilter}},[t._v("确定")])],1)]),t._v(" "),i("Form",{ref:"filterForm",attrs:{model:t.filterForm}},[i("FormItem",{attrs:{label:"回访结果"}},[i("Select",{model:{value:t.filterForm.returnVisitResult,callback:function(e){t.$set(t.filterForm,"returnVisitResult",e)},expression:"filterForm.returnVisitResult"}},[i("Option",{attrs:{value:"PASS"}},[t._v("通过")]),t._v(" "),i("Option",{attrs:{value:"NOT_PASS"}},[t._v("不通过")])],1)],1),t._v(" "),i("FormItem",{attrs:{label:"工单编号"}},[i("Input",{model:{value:t.filterForm.orderSn,callback:function(e){t.$set(t.filterForm,"orderSn",e)},expression:"filterForm.orderSn"}})],1),t._v(" "),i("FormItem",{attrs:{label:"创建时间"}},[i("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange"},on:{"on-change":t.dateRangeChange},model:{value:t.filterForm.dateRange,callback:function(e){t.$set(t.filterForm,"dateRange",e)},expression:"filterForm.dateRange"}})],1),t._v(" "),i("FormItem",{attrs:{label:"服务网点"}},[i("Select",{model:{value:t.filterForm.repairStationId,callback:function(e){t.$set(t.filterForm,"repairStationId",e)},expression:"filterForm.repairStationId"}},t._l(t.stationLists,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("FormItem",{attrs:{label:"售后回访"}},[i("Select",{model:{value:t.filterForm.isReturnVisit,callback:function(e){t.$set(t.filterForm,"isReturnVisit",e)},expression:"filterForm.isReturnVisit"}},[i("Option",{attrs:{value:"Y"}},[t._v("是")]),t._v(" "),i("Option",{attrs:{value:"N"}},[t._v("否")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=i("VU/8")(o,c,!1,function(t){i("qhlq")},"data-v-13ea8312",null);e.default=u.exports},qhlq:function(t,e){}});
//# sourceMappingURL=45.b8b5810e5979badef91e.js.map