webpackJsonp([31],{"4dK5":function(t,e){},"8Kiw":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),i=a("TVG1"),o={name:"working-time",data:function(){return{backup:[],general:[],customTime:[],generalCustom:[],backupCustom:[],newGeneral:[],newCustom:[]}},methods:{test:function(t){console.log(t)},getTime:function(){var t=this;this.$http.get("/repair/work/time/config/info").then(function(e){e.data.data.map(function(e,a){"Y"===e.isSlave?t.backup=e.configList.map(function(t){return"Y"===t.isWorkday?t.notWorkDay=!0:t.notWorkDay=!1,t}):t.general=e.configList.map(function(t){return"Y"===t.isWorkday?t.notWorkDay=!0:t.notWorkDay=!1,t})})})},save:function(t,e){var a=this,s=null;(s=e?{isSlave:"Y",configList:this.backup}:{isSlave:"N",configList:this.general}).configList=s.configList.map(function(t){return t.notWorkDay?t.isWorkday="Y":t.isWorkday="N",delete t.notWorkDay,t}),this.$http.post("/repair/work/time/config/save",n()({},s)).then(function(t){0===t.data.code?(a.$Message.success("保存成功"),a.getTime()):a.$Message.error(t.data.msg)})},getCustom:function(){var t=this;this.$http.get("/repair/work/time/custom/config/info").then(function(e){0===e.data.code&&e.data.data.map(function(e){return"Y"===e.isSlave?e.configList.length>0&&(t.backupCustom=e.configList.map(function(t){return t.dateRange=[t.beginTime,t.endTime],t})):e.configList.length>0&&(t.generalCustom=e.configList.map(function(t){return t.dateRange=[t.beginTime,t.endTime],t})),e})})},addNew:function(t){"general"===t?this.newGeneral.push({name:"",dateRange:[],isWorkday:""}):this.newCustom.push({name:"",dateRange:[],isWorkday:""})},saveNew:function(t){var e=this,a=null;"general"===t?(a=this.newGeneral[0]).isSlave="N":(a=this.newCustom[0]).isSlave="Y";var s={name:a.name,isSlave:a.isSlave,beginTime:i.a.formateTime(a.dateRange[0]),endTime:i.a.formateTime(a.dateRange[1]),isWorkday:a.isWorkday};console.log(s),this.$http.post("/repair/work/time/custom/config/save",n()({},s)).then(function(t){0===t.data.code?(e.$Message.success("保存成功"),e.newGeneral=[],e.newCustom=[],e.getCustom()):e.$Message.error("保存失败"+t.data.msg)})},cancelAdd:function(t){"general"===t?this.newGeneral=[]:this.newCustom=[]},deleteTime:function(t){var e=this;this.$http.delete("/repair/work/time/custom/config/delete?id="+t).then(function(t){0===t.data.code?e.getCustom():e.$Message.error(t.data.msg)})}},created:function(){this.getTime(),this.getCustom()}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"working-time"},[a("Row",{attrs:{gutter:15}},[a("Col",{staticClass:"mb-15",attrs:{lg:12,md:24}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("普通网点")]),t._v(" "),a("div",{staticStyle:{"margin-top":"-5px"},attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1),t._v(" "),a("Form",[a("Row",{staticClass:"mb-15",attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"center",offset:"6"}},[t._v("开始时间")]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[t._v("结束时间")])],1),t._v(" "),t._l(t.general,function(e,s){return a("FormItem",{key:s},[a("Row",{attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"right"}},[t._v(t._s(e.name))]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"worktime.beginTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"worktime.endTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Checkbox",{model:{value:e.notWorkDay,callback:function(a){t.$set(e,"notWorkDay",a)},expression:"worktime.notWorkDay"}},[t._v("非工作日")])],1)],1)],1)})],2),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"special-date"},[a("div",{staticClass:"top-title "},[a("h4",{staticClass:"title"},[t._v("特殊日期")]),t._v(" "),a("div",{staticClass:"right-btn"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){t.addNew("general")}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"special-content"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("日期")]),t._v(" "),a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",[t._l(t.generalCustom,function(e,s){return a("tr",{key:s},[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{disabled:"",size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"custom.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{disabled:"",editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"custom.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{disabled:"",size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"custom.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"error",size:"small"},on:{click:function(a){t.deleteTime(e.id)}}},[t._v("删除")])],1)])}),t._v(" "),t._l(t.newGeneral,function(e){return a("tr",[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"newTime.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"newTime.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"newTime.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.saveNew("general")}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{size:"small"},on:{click:function(e){t.cancelAdd("general")}}},[t._v("取消")])],1)])})],2)])])])],1)],1),t._v(" "),a("Col",{staticClass:"mb-15",attrs:{lg:12,md:24}},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[t._v("备用网点")]),t._v(" "),a("div",{staticStyle:{"margin-top":"-5px"},attrs:{slot:"extra"},slot:"extra"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.save(e,!0)}}},[t._v("保存")])],1),t._v(" "),a("Form",[a("Row",{staticClass:"mb-15",attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"center",offset:"6"}},[t._v("开始时间")]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[t._v("结束时间")])],1),t._v(" "),t._l(t.backup,function(e){return a("FormItem",{key:e.id},[a("Row",{attrs:{gutter:15}},[a("Col",{attrs:{span:"6",align:"right"}},[t._v(t._s(e.name))]),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.beginTime,callback:function(a){t.$set(e,"beginTime",a)},expression:"backtime.beginTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6",align:"center"}},[a("TimePicker",{attrs:{format:"HH:mm",type:"time"},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"backtime.endTime"}})],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("Checkbox",{model:{value:e.notWorkDay,callback:function(a){t.$set(e,"notWorkDay",a)},expression:"backtime.notWorkDay"}},[t._v("非工作日")])],1)],1)],1)})],2),t._v(" "),a("Divider"),t._v(" "),a("div",{staticClass:"special-date"},[a("div",{staticClass:"top-title "},[a("h4",{staticClass:"title"},[t._v("特殊日期")]),t._v(" "),a("div",{staticClass:"right-btn"},[a("Button",{attrs:{type:"primary",icon:"ios-add"},on:{click:function(e){t.addNew("custom")}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"special-content"},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("日期")]),t._v(" "),a("th",[t._v("选项")]),t._v(" "),a("th",[t._v("操作")])])]),t._v(" "),a("tbody",[t._l(t.backupCustom,function(e){return a("tr",{key:e.id},[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"custom.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{format:"yyyy/MM/dd",size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"custom.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"custom.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"error",size:"small"},on:{click:function(a){t.deleteTime(e.id)}}},[t._v("删除")])],1)])}),t._v(" "),t._l(t.newCustom,function(e){return a("tr",[a("td",[a("Input",{staticStyle:{width:"120px"},attrs:{size:"small"},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"newTime.name"}})],1),t._v(" "),a("td",[a("DatePicker",{staticStyle:{width:"200px"},attrs:{editable:!1,size:"small",type:"daterange","split-panels":""},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"newTime.dateRange"}})],1),t._v(" "),a("td",[a("Select",{attrs:{size:"small"},model:{value:e.isWorkday,callback:function(a){t.$set(e,"isWorkday",a)},expression:"newTime.isWorkday"}},[a("Option",{attrs:{value:"Y"}},[t._v("工作日")]),t._v(" "),a("Option",{attrs:{value:"N"}},[t._v("非工作日")])],1)],1),t._v(" "),a("td",[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.saveNew("backup")}}},[t._v("保存")]),t._v(" "),a("Button",{attrs:{size:"small"},on:{click:function(e){t.cancelAdd("backup")}}},[t._v("取消")])],1)])})],2)])])])],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,l,!1,function(t){a("4dK5")},"data-v-615735f6",null);e.default=r.exports}});
//# sourceMappingURL=31.1363b4c825a1d9163ba4.js.map