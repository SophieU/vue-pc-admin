webpackJsonp([44],{"G+W6":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("woOf"),n=a.n(i),r=a("TVG1"),l={name:"inport-admin",data:function(){var t=this;return{filter:!1,filterForm:{department:"",inputType:"",sn:"",dateRange:[]},pageNo:1,pageSize:10,totalCount:0,columns:[{title:"组织名称",key:"departmentName",align:"center"},{title:"单号",key:"sn",align:"center"},{title:"创建时间",key:"createTime",align:"center"},{title:"入库类别",key:"inputType",align:"center"},{title:"操作人",key:"creator",align:"center"},{title:"入库成本",key:"amount",align:"center"},{title:"操作",align:"center",render:function(e,a){var i=t;return e("Button",{props:{type:"text",size:"small"},style:{color:"#039dff"},on:{click:function(){a.row.id;i.$router.push({name:"inDetail"})}}},"查看")}}],lists:[],organLists:[]}},methods:{newIn:function(){this.$router.push({name:"importNew"})},getLists:function(t){var e=this,a="pageNo="+this.pageNo+"&pageSize="+this.pageSize;t&&(a=a+"&"+r.a.formatterParams(t)),this.$http.post("/repair/material/input/order/list?"+a).then(function(t){if(0===t.data.code){var a=t.data.data;e.lists=a.list,e.filter=!1}else console.log("辅材入库获取失败："+t.data.msg),e.filter=!1})},pageChange:function(t){this.pageNo=t,this.getLists()},pageSizeChange:function(t){this.pageSize=t,this.getLists()},clearFilter:function(){this.$refs.filterForm.resetFields(),this.filterForm={departmentId:"",inputType:"",sn:"",dateRange:[]},this.getLists()},saveFilter:function(){var t=this.filterForm,e=t.department.split("-"),a={inputType:t.inputType,sn:t.sn};2===e.length&&(a=n()(a,{departmentId:e[0],departmentType:e[1]})),t.dateRange[0]&&t.dateRange[1]&&(a=n()(a,{startTime:r.a.formateTime(t.dateRange[0],!0),endTime:r.a.formateTime(t.dateRange[1],!0)})),this.getLists(a)},getOrgan:function(){var t=this;this.$http.get("/repair/material/input/order/departmentList").then(function(e){0===e.data.code&&(t.organLists=e.data.data)})}},mounted:function(){this.getOrgan()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{attrs:{type:"primary"},on:{click:t.newIn}},[t._v("新建入库")]),t._v(" "),a("Button",{on:{click:function(e){t.filter=!0}}},[t._v("筛选")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"}},[t._v("excel导出")])],1)]),t._v(" "),a("div",{staticClass:"table-wrapper"},[a("Table",{attrs:{columns:t.columns,data:t.lists}}),t._v(" "),a("div",{staticClass:"pagination"},[a("Page",{attrs:{total:t.totalCount,"show-elevator":"","show-sizer":""},on:{"on-change":t.pageChange,"on-page-size-change":t.pageSizeChange}})],1)],1),t._v(" "),a("Drawer",{attrs:{title:"入库筛选",width:"425"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("div",{staticClass:"clearfix mb-15"},[a("div",{staticClass:"pull-left"},[a("Button",{on:{click:t.clearFilter}},[t._v("清空筛选条件")])],1),t._v(" "),a("div",{staticClass:"pull-right"},[a("Button",{attrs:{type:"primary"},on:{click:t.saveFilter}},[t._v("确定筛选")])],1)]),t._v(" "),a("div",[a("Form",{attrs:{refs:"filterForm","label-position":"top",model:t.filterForm}},[a("FormItem",{attrs:{label:"创建时间"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange"},model:{value:t.filterForm.dateRange,callback:function(e){t.$set(t.filterForm,"dateRange",e)},expression:"filterForm.dateRange"}})],1),t._v(" "),a("FormItem",{attrs:{label:"组织名称"}},[a("Select",{model:{value:t.filterForm.department,callback:function(e){t.$set(t.filterForm,"department",e)},expression:"filterForm.department"}},t._l(t.organLists,function(e){return a("Option",{key:e.id,attrs:{value:e.id+"-"+e.type}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("FormItem",{attrs:{label:"入库类型"}},[a("Select",{model:{value:t.filterForm.inputType,callback:function(e){t.$set(t.filterForm,"inputType",e)},expression:"filterForm.inputType"}},[a("Option",{attrs:{value:"PURCHASE"}},[t._v("采购")])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"原始单号"}},[a("Input",{model:{value:t.filterForm.sn,callback:function(e){t.$set(t.filterForm,"sn",e)},expression:"filterForm.sn"}})],1)],1)],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(l,s,!1,function(t){a("bHJH")},"data-v-1df0ae2d",null);e.default=o.exports},bHJH:function(t,e){}});
//# sourceMappingURL=44.9c5f182139e3f7fb132d.js.map