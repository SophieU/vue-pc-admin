{"version":3,"sources":["webpack:///src/pages/finance/income-detail.vue","webpack:///./src/pages/finance/income-detail.vue?341c","webpack:///./src/pages/finance/income-detail.vue"],"names":["income_detail","name","data","viewType","filter","repairColumns","title","key","align","detailColumn","detailLists","earningCount","categoryEarningCountList","repairLists","stationLists","pageNo","pageSize","totalCount","filterForm","repairCategoryId","departmentId","dateRange","methods","getTotal","_this","this","param","timeType","timeScope","extends_default","startDate","endDate","util","formatterParams","$http","post","then","res","code","console","log","msg","getDetailLists","_this2","query","list","pageChange","val","pageSizeChange","filterDateChange","clearFilter","$refs","resetFields","sureFilter","exportExcel","length","responseType","blob","Blob","type","downloadElement","document","createElement","href","window","URL","createObjectURL","download","body","appendChild","click","removeChild","revokeObjectURL","mounted","_this3","getRepairType","getStationLists","watch","newVal","finance_income_detail","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","on","$event","_v","_s","orderAmount","employeeCommission","platformCommission","materialEarning","materialCheckEarning","serviceEarning","columns","total","show-sizer","show-elevator","on-change","on-page-size-change","width","on-close","model","value","callback","$$v","expression","ref","label-position","label","prop","$set","_l","item","id","staticStyle","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6IAqFAA,GACAC,KAAA,gBACAC,KAFA,WAGA,OACAC,SAAA,QACAC,QAAA,EACAC,gBACAC,MAAA,OAAAC,IAAA,OAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,cAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,qBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,qBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,kBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,uBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,iBAAAC,MAAA,WAEAC,eACAH,MAAA,OAAAC,IAAA,qBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,iBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,cAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,qBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,qBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,kBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,uBAAAC,MAAA,WACAF,MAAA,OAAAC,IAAA,iBAAAC,MAAA,WAEAE,eACAC,gBACAC,4BACAC,eACAC,gBACAC,OAAA,EACAC,SAAA,GACAC,WAAA,EACAC,YACAC,iBAAA,GACAC,aAAA,GACAC,gBAIAC,SACAC,SADA,SACAnB,GAAA,IAAAoB,EAAAC,KACAC,GACAC,SAAA,GAEA,UAAAF,KAAAtB,SACAuB,EAAAE,UAAA,EACA,UAAAH,KAAAtB,WACAuB,EAAAE,UAAA,GAEAxB,IACAsB,EAAAG,OAAAzB,GACAA,EAAA0B,WAAA1B,EAAA2B,UACAL,EAAAC,SAAA,SACAD,EAAAE,YAGAF,EAAAM,EAAA,EAAAC,gBAAAP,GACAD,KAAAS,MAAAC,KAAA,kBAAAT,GAAAU,KAAA,SAAAC,GACA,OAAAA,EAAAnC,KAAAoC,KAAA,CACA,IAAApC,EAAAmC,EAAAnC,UACAsB,EAAAb,aAAAT,EAAAS,aACAa,EAAAZ,yBAAAV,EAAAU,8BAEA2B,QAAAC,IAAA,YAAAH,EAAAnC,KAAAuC,QAIAC,eA5BA,SA4BAtC,GAAA,IAAAuC,EAAAlB,KACAmB,EAAA,YAAAnB,KAAAT,SAAA,WAAAS,KAAAV,OACAW,GACAC,SAAA,GAEA,UAAAF,KAAAtB,SACAuB,EAAAE,UAAA,EACA,UAAAH,KAAAtB,WACAuB,EAAAE,UAAA,GAEAxB,IACAsB,EAAAG,OAAAzB,GACAA,EAAA0B,WAAA1B,EAAA2B,UACAL,EAAAC,SAAA,EACAF,KAAAtB,SAAA,UACAuB,EAAAE,YAGAF,EAAAM,EAAA,EAAAC,gBAAAP,GACAD,KAAAS,MAAAC,KAAA,iBAAAS,EAAA,IAAAlB,GAAAU,KAAA,SAAAC,GACA,OAAAA,EAAAnC,KAAAoC,KAAA,CACA,IAAApC,EAAAmC,EAAAnC,UACAyC,EAAAjC,YAAAR,EAAA2C,KACAF,EAAA3B,SAAAd,EAAAc,SACA2B,EAAA1B,WAAAf,EAAAe,WACA0B,EAAAvC,QAAA,EACAA,KAAA0B,YACAa,EAAAxC,SAAA,SAGAoC,QAAAC,IAAA,cAAAH,EAAAnC,KAAAuC,QAIAK,WA9DA,SA8DAC,GACAtB,KAAAV,OAAAgC,EACAtB,KAAAiB,kBAEAM,eAlEA,SAkEAD,GACAtB,KAAAT,SAAA+B,EACAtB,KAAAiB,kBAEAO,iBAtEA,SAsEAF,GACAtB,KAAAP,WAAAY,UAAAiB,EAAA,GACAtB,KAAAP,WAAAa,QAAAgB,EAAA,IAEAG,YA1EA,SA0EAjD,GACAwB,KAAA0B,MAAAlD,GAAAmD,cACA3B,KAAArB,QAAA,EACAqB,KAAAtB,SAAA,QACAsB,KAAAiB,iBACAjB,KAAAF,YAEA8B,WAjFA,WAkFA,IAAAnC,EAAAW,OAAAJ,KAAAP,mBACAA,EAAAG,UACAI,KAAAiB,eAAAxB,GACAO,KAAAF,SAAAL,IAEAoC,YAvFA,WAwFA,IAAAlD,EAAAyB,OAAAJ,KAAAP,YACAQ,GACAC,SAAA,GAOA,QAAApB,IALA,UAAAkB,KAAAtB,SACAuB,EAAAE,UAAA,EACA,UAAAH,KAAAtB,WACAuB,EAAAE,UAAA,GAEAxB,GACAA,EAAAG,GAAAgD,OAAA,GAAAnD,EAAAG,GAAA,KACAmB,EAAAnB,GAAAH,EAAAG,IAEAmB,EAAAI,WAAAJ,EAAAK,UACAL,EAAAC,SAAA,SACAD,EAAAE,iBACAF,EAAAL,WAGA,IAAAuB,EAAAZ,EAAA,EAAAC,gBAAAP,GAEAD,KAAAS,MAAAC,KAAA,mBAAAS,EAAA,MAAAY,aAAA,SACApB,KAAA,SAAAC,GACA,IAAAoB,EAAA,IAAAC,MAAArB,EAAAnC,OAAAyD,KAAA,oFACAC,EAAAC,SAAAC,cAAA,KACAC,EAAAC,OAAAC,IAAAC,gBAAAT,GACAG,EAAAG,OACAH,EAAAO,SAAA,cACAN,SAAAO,KAAAC,YAAAT,GACAA,EAAAU,QACAT,SAAAO,KAAAG,YAAAX,GACAI,OAAAC,IAAAO,gBAAAT,OAIAU,QAnKA,WAmKA,IAAAC,EAAAjD,KACAO,EAAA,EAAA2C,cAAA,SAAAzE,GACAwE,EAAA7D,YAAAX,IAEA8B,EAAA,EAAA4C,gBAAA,SAAA1E,GACAwE,EAAA5D,aAAAZ,IAGAuB,KAAAF,WACAE,KAAAiB,kBAEAmC,OACA1E,SADA,SACA2E,GACAA,IACArD,KAAAiB,iBACAjB,KAAAF,eCpQAwD,GADiBC,OAFjB,WAA0B,IAAAC,EAAAxD,KAAayD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,QAAAA,EAAA,OAA4BE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,UAAeG,OAAO5B,KAAA,UAAAsB,EAAA9E,SAAA,qBAAkDqF,IAAKlB,MAAA,SAAAmB,GAAyBR,EAAA9E,SAAA,YAAuB8E,EAAAS,GAAA,QAAAT,EAAAS,GAAA,KAAAN,EAAA,UAA0CG,OAAO5B,KAAA,UAAAsB,EAAA9E,SAAA,qBAAkDqF,IAAKlB,MAAA,SAAAmB,GAAyBR,EAAA9E,SAAA,YAAuB8E,EAAAS,GAAA,SAAAT,EAAAS,GAAA,KAAAN,EAAA,UAA2CI,IAAIlB,MAAA,SAAAmB,GAAyBR,EAAA7E,QAAA,MAAkB6E,EAAAS,GAAA,YAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA2CE,YAAA,eAAyBF,EAAA,UAAeG,OAAO5B,KAAA,WAAiB6B,IAAKlB,MAAAW,EAAA3B,eAAyB2B,EAAAS,GAAA,mBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAAAA,EAAA,OAA4DE,YAAA,wBAAkCF,EAAA,SAAcE,YAAA,iBAA2BF,EAAA,SAAAA,EAAA,MAAAA,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,UAAAT,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAA,cAAAT,EAAAS,GAAA,KAAAN,EAAA,SAAAA,EAAA,MAAAA,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAV,SAAAgF,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAiF,gBAAAX,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAkF,uBAAAZ,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAmF,uBAAAb,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAoF,oBAAAd,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAqF,yBAAAf,EAAAS,GAAA,KAAAN,EAAA,MAAAH,EAAAS,GAAAT,EAAAU,GAAAV,EAAAtE,aAAAsF,2BAAAhB,EAAAS,GAAA,KAAAN,EAAA,OAA+zBE,YAAA,wBAAkCF,EAAA,SAAcG,OAAOW,QAAAjB,EAAA5E,cAAAH,KAAA+E,EAAArE,6BAAiE,GAAAqE,EAAAS,GAAA,KAAAN,EAAA,OAA4BE,YAAA,kBAA4BF,EAAA,MAAWE,YAAA,UAAoBL,EAAAS,GAAA,QAAAT,EAAAS,GAAA,KAAAN,EAAA,SAAyCG,OAAOW,QAAAjB,EAAAxE,aAAAP,KAAA+E,EAAAvE,eAAmDuE,EAAAS,GAAA,KAAAN,EAAA,OAAwBE,YAAA,eAAyBF,EAAA,QAAaG,OAAOY,MAAAlB,EAAAhE,WAAAmF,aAAA,GAAAC,gBAAA,IAA0Db,IAAKc,YAAArB,EAAAnC,WAAAyD,sBAAAtB,EAAAjC,mBAAqE,SAAAiC,EAAAS,GAAA,KAAAN,EAAA,UAAqCG,OAAOjF,MAAA,OAAAkG,MAAA,OAA6BhB,IAAKiB,WAAA,SAAAhB,GAA4BR,EAAA/B,YAAA,gBAA+BwD,OAAQC,MAAA1B,EAAA,OAAA2B,SAAA,SAAAC,GAA4C5B,EAAA7E,OAAAyG,GAAeC,WAAA,YAAsB1B,EAAA,OAAYE,YAAA,mBAA6BF,EAAA,OAAYE,YAAA,cAAwBF,EAAA,UAAeI,IAAIlB,MAAA,SAAAmB,GAAyBR,EAAA/B,YAAA,kBAAgC+B,EAAAS,GAAA,gBAAAT,EAAAS,GAAA,KAAAN,EAAA,OAA+CE,YAAA,eAAyBF,EAAA,UAAeG,OAAO5B,KAAA,WAAiB6B,IAAKlB,MAAAW,EAAA5B,cAAwB4B,EAAAS,GAAA,cAAAT,EAAAS,GAAA,KAAAN,EAAA,QAA8C2B,IAAA,aAAAxB,OAAwBmB,MAAAzB,EAAA/D,WAAA8F,iBAAA,SAA+C5B,EAAA,YAAiBG,OAAO0B,MAAA,OAAAC,KAAA,sBAA0C9B,EAAA,UAAesB,OAAOC,MAAA1B,EAAA/D,WAAA,iBAAA0F,SAAA,SAAAC,GAAiE5B,EAAAkC,KAAAlC,EAAA/D,WAAA,mBAAA2F,IAAkDC,WAAA,gCAA2C7B,EAAAmC,GAAAnC,EAAA,qBAAAoC,GAAyC,OAAAjC,EAAA,UAAoB7E,IAAA8G,EAAAC,GAAA/B,OAAmBoB,MAAAU,EAAAC,MAAiBrC,EAAAS,GAAAT,EAAAU,GAAA0B,EAAApH,aAA8B,GAAAgF,EAAAS,GAAA,KAAAN,EAAA,YAAkCG,OAAO0B,MAAA,OAAAC,KAAA,kBAAsC9B,EAAA,UAAesB,OAAOC,MAAA1B,EAAA/D,WAAA,aAAA0F,SAAA,SAAAC,GAA6D5B,EAAAkC,KAAAlC,EAAA/D,WAAA,eAAA2F,IAA8CC,WAAA,4BAAuC7B,EAAAmC,GAAAnC,EAAA,sBAAAoC,GAA0C,OAAAjC,EAAA,UAAoB7E,IAAA8G,EAAAC,GAAA/B,OAAmBoB,MAAAU,EAAAC,MAAiBrC,EAAAS,GAAAT,EAAAU,GAAA0B,EAAApH,aAA8B,GAAAgF,EAAAS,GAAA,KAAAN,EAAA,YAAkCG,OAAO0B,MAAA,KAAAC,KAAA,eAAiC9B,EAAA,cAAmBmC,aAAaf,MAAA,QAAejB,OAAQ5B,KAAA,aAAmB6B,IAAKc,YAAArB,EAAAhC,kBAAiCyD,OAAQC,MAAA1B,EAAA/D,WAAA,UAAA0F,SAAA,SAAAC,GAA0D5B,EAAAkC,KAAAlC,EAAA/D,WAAA,YAAA2F,IAA2CC,WAAA,2BAAoC,gBAEjxHU,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACA3H,EACA+E,GATA,EAVA,SAAA6C,GACAF,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/31.5db8aa3e77304a1fefd7.js","sourcesContent":["<template>\n  <Card>\n    <div class=\"clearfix mb-15\">\n      <div class=\"pull-left\">\n        <Button @click=\"viewType='month'\" :type=\"viewType==='month'?'primary':'default'\">本月</Button>\n        <Button @click=\"viewType='three'\" :type=\"viewType==='three'?'primary':'default'\">前三月</Button>\n        <Button @click=\"filter=true\">筛选</Button>\n      </div>\n      <div class=\"pull-right\">\n        <Button @click=\"exportExcel\" type=\"primary\">excel导出</Button>\n      </div>\n    </div>\n    <div>\n      <div class=\"table-wrapper mb-15\">\n        <table class=\"native-table\">\n          <thead>\n          <tr>\n            <th>项目名称</th>\n            <th>工单收入</th>\n            <th>员工结算</th>\n            <th>平台佣金</th>\n            <th>辅料成本</th>\n            <th>辅料亏损</th>\n            <th>服务收益</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr>\n            <td>{{earningCount.name}}</td>\n            <td>{{earningCount.orderAmount}}</td>\n            <td>{{earningCount.employeeCommission}}</td>\n            <td>{{earningCount.platformCommission}}</td>\n            <td>{{earningCount.materialEarning}}</td>\n            <td>{{earningCount.materialCheckEarning}}</td>\n            <td>{{earningCount.serviceEarning}}</td>\n          </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"table-wrapper mb-15\">\n        <Table :columns=\"repairColumns\" :data=\"categoryEarningCountList\"></Table>\n      </div>\n      <div class=\"table-wrapper\">\n        <h4 class=\"mb-15\">明细</h4>\n        <Table :columns=\"detailColumn\" :data=\"detailLists\"></Table>\n        <div class=\"pagination\">\n          <Page :total=\"totalCount\" show-sizer show-elevator\n            @on-change=\"pageChange\"\n                @on-page-size-change=\"pageSizeChange\"\n          ></Page>\n        </div>\n      </div>\n    </div>\n\n    <!--筛选-->\n    <Drawer title=\"工单筛选\" v-model=\"filter\" width=\"450\" @on-close=\"clearFilter('filterForm')\">\n      <div class=\"clearfix mb-15\">\n        <div class=\"pull-left\">\n          <Button @click=\"clearFilter('filterForm')\">清空筛选条件</Button>\n        </div>\n        <div class=\"pull-right\">\n          <Button @click=\"sureFilter\" type=\"primary\">确定</Button>\n        </div>\n      </div>\n      <Form ref=\"filterForm\" :model=\"filterForm\" label-position=\"top\">\n        <FormItem label=\"报修类型\" prop=\"repairCategoryId\">\n          <Select v-model=\"filterForm.repairCategoryId\">\n            <Option v-for=\"item in repairLists\" :key=\"item.id\" :value=\"item.id\">{{item.name}}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"服务网点\" prop=\"departmentId\">\n          <Select v-model=\"filterForm.departmentId\">\n            <Option v-for=\"item in stationLists\" :key=\"item.id\" :value=\"item.id\">{{item.name}}</Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"时间\" prop=\"dateRange\">\n          <DatePicker @on-change=\"filterDateChange\" v-model=\"filterForm.dateRange\" type=\"daterange\" style=\"width:100%;\"></DatePicker>\n        </FormItem>\n      </Form>\n    </Drawer>\n  </Card>\n</template>\n\n<script>\n  import util from '../../libs/util'\n    export default {\n        name: \"income-detail\",\n      data(){\n        return{\n          viewType:'month',\n          filter:false,\n          repairColumns:[\n            {title:'报修类型',key:'name',align:'center'},\n            {title:'工单收入',key:'orderAmount',align:'center'},\n            {title:'员工结算',key:'employeeCommission',align:'center'},\n            {title:'平台佣金',key:'platformCommission',align:'center'},\n            {title:'辅料成本',key:'materialEarning',align:'center'},\n            {title:'辅料亏损',key:'materialCheckEarning',align:'center'},\n            {title:'服务收益',key:'serviceEarning',align:'center'},\n          ],\n          detailColumn:[\n            {title:'报修类型',key:'repairCategoryName',align:'center'},\n            {title:'服务网点',key:'departmentName',align:'center'},\n            {title:'工单收入',key:'orderAmount',align:'center'},\n            {title:'员工结算',key:'employeeCommission',align:'center'},\n            {title:'平台佣金',key:'platformCommission',align:'center'},\n            {title:'辅料成本',key:'materialEarning',align:'center'},\n            {title:'辅料亏损',key:'materialCheckEarning',align:'center'},\n            {title:'服务收益',key:'serviceEarning',align:'center'},\n          ],\n          detailLists:[],\n          earningCount:{},//统计总数\n          categoryEarningCountList:[],\n          repairLists:[], //下拉报修分类\n          stationLists:[], //下拉网点列表\n          pageNo:1,\n          pageSize:10,\n          totalCount:0,\n          filterForm:{\n            repairCategoryId:'',\n            departmentId:'',\n            dateRange:[],\n          }\n        }\n      },\n      methods:{\n        getTotal(filter){\n          let param = {\n            timeType:1,\n          };\n          if(this.viewType==='month'){\n            param.timeScope=1\n          }else if(this.viewType==='three'){\n            param.timeScope=2\n          }\n          if(filter){\n            param={...filter};\n            if(filter.startDate&&filter.endDate){\n              param.timeType=2;\n              delete param.timeScope;\n            }\n          }\n          param=util.formatterParams(param);\n          this.$http.post(`/earning/count?${param}`).then(res=>{\n            if(res.data.code===0){\n              let data = res.data.data;\n              this.earningCount=data.earningCount;\n              this.categoryEarningCountList=data.categoryEarningCountList;\n            }else{\n              console.log('辅材核算统计失败：'+res.data.msg);\n            }\n          })\n        },\n        getDetailLists(filter){\n          let query = `pageSize=${this.pageSize}&pageNo=${this.pageNo}`;\n          let param = {\n            timeType:1,\n          };\n          if(this.viewType==='month'){\n            param.timeScope=1\n          }else if(this.viewType==='three'){\n            param.timeScope=2\n          }\n          if(filter){\n            param={...filter};\n            if(filter.startDate&&filter.endDate){\n              param.timeType=2;\n              this.viewType='';\n              delete param.timeScope;\n            }\n          }\n          param =util.formatterParams(param);\n          this.$http.post(`/earning/list?${query}&${param}`).then(res=>{\n            if(res.data.code===0){\n              let data= res.data.data;\n              this.detailLists=data.list;\n              this.pageSize=data.pageSize;\n              this.totalCount=data.totalCount;\n              this.filter=false;\n              if(filter&&filter.startDate){\n                this.viewType='';\n              }\n            }else{\n              console.log('辅材核算明细列表失败：'+res.data.msg);\n            }\n          })\n        },\n        pageChange(val){\n          this.pageNo=val;\n          this.getDetailLists();\n        },\n        pageSizeChange(val){\n          this.pageSize=val;\n          this.getDetailLists();\n        },\n        filterDateChange(val){\n          this.filterForm.startDate=val[0];\n          this.filterForm.endDate=val[1];\n        },\n        clearFilter(name){\n          this.$refs[name].resetFields();\n          this.filter=false;\n          this.viewType='month';\n          this.getDetailLists();\n          this.getTotal();\n        },\n        sureFilter(){\n          let filterForm = {...this.filterForm};\n          delete filterForm.dateRange;\n          this.getDetailLists(filterForm);\n          this.getTotal(filterForm);\n        },\n        exportExcel(){\n          let filter = {...this.filterForm};\n          let param = {\n            timeType:1,\n          };\n          if(this.viewType==='month'){\n            param.timeScope=1\n          }else if(this.viewType==='three'){\n            param.timeScope=2\n          }\n          for(let key in filter){\n            if(filter[key].length>0||filter[key]>0){\n              param[key]=filter[key];\n            }\n            if(param.startDate&&param.endDate){\n              param.timeType=2;\n              delete param.timeScope;\n              delete param.dateRange;\n            }\n          }\n          let query=util.formatterParams(param);\n\n          this.$http.post(`/earning/export?${query}`,null,{responseType:'blob'})\n            .then(res=>{\n              let blob = new Blob([res.data], {type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8'}); //application/vnd.openxmlformats-officedocument.spreadsheetml.sheet这里表示xlsx类型\n              let downloadElement = document.createElement('a');\n              let href = window.URL.createObjectURL(blob); //创建下载的链接\n              downloadElement.href = href;\n              downloadElement.download = '辅材核算列表.xlsx'; //下载后文件名\n              document.body.appendChild(downloadElement);\n              downloadElement.click(); //点击下载\n              document.body.removeChild(downloadElement); //下载完成移除元素\n              window.URL.revokeObjectURL(href); //释放掉blob对象\n            })\n        }\n      },\n      mounted(){\n        util.getRepairType(data=>{\n          this.repairLists=data;\n        });\n        util.getStationLists(data=>{\n          this.stationLists=data;\n        });\n\n        this.getTotal();\n        this.getDetailLists();\n      },\n      watch:{\n        viewType(newVal){\n          if(newVal){\n            this.getDetailLists();\n            this.getTotal();\n          }\n        }\n      }\n    }\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/finance/income-detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Card',[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{attrs:{\"type\":_vm.viewType==='month'?'primary':'default'},on:{\"click\":function($event){_vm.viewType='month'}}},[_vm._v(\"本月\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":_vm.viewType==='three'?'primary':'default'},on:{\"click\":function($event){_vm.viewType='three'}}},[_vm._v(\"前三月\")]),_vm._v(\" \"),_c('Button',{on:{\"click\":function($event){_vm.filter=true}}},[_vm._v(\"筛选\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportExcel}},[_vm._v(\"excel导出\")])],1)]),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"table-wrapper mb-15\"},[_c('table',{staticClass:\"native-table\"},[_c('thead',[_c('tr',[_c('th',[_vm._v(\"项目名称\")]),_vm._v(\" \"),_c('th',[_vm._v(\"工单收入\")]),_vm._v(\" \"),_c('th',[_vm._v(\"员工结算\")]),_vm._v(\" \"),_c('th',[_vm._v(\"平台佣金\")]),_vm._v(\" \"),_c('th',[_vm._v(\"辅料成本\")]),_vm._v(\" \"),_c('th',[_vm._v(\"辅料亏损\")]),_vm._v(\" \"),_c('th',[_vm._v(\"服务收益\")])])]),_vm._v(\" \"),_c('tbody',[_c('tr',[_c('td',[_vm._v(_vm._s(_vm.earningCount.name))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.orderAmount))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.employeeCommission))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.platformCommission))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.materialEarning))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.materialCheckEarning))]),_vm._v(\" \"),_c('td',[_vm._v(_vm._s(_vm.earningCount.serviceEarning))])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"table-wrapper mb-15\"},[_c('Table',{attrs:{\"columns\":_vm.repairColumns,\"data\":_vm.categoryEarningCountList}})],1),_vm._v(\" \"),_c('div',{staticClass:\"table-wrapper\"},[_c('h4',{staticClass:\"mb-15\"},[_vm._v(\"明细\")]),_vm._v(\" \"),_c('Table',{attrs:{\"columns\":_vm.detailColumn,\"data\":_vm.detailLists}}),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('Page',{attrs:{\"total\":_vm.totalCount,\"show-sizer\":\"\",\"show-elevator\":\"\"},on:{\"on-change\":_vm.pageChange,\"on-page-size-change\":_vm.pageSizeChange}})],1)],1)]),_vm._v(\" \"),_c('Drawer',{attrs:{\"title\":\"工单筛选\",\"width\":\"450\"},on:{\"on-close\":function($event){_vm.clearFilter('filterForm')}},model:{value:(_vm.filter),callback:function ($$v) {_vm.filter=$$v},expression:\"filter\"}},[_c('div',{staticClass:\"clearfix mb-15\"},[_c('div',{staticClass:\"pull-left\"},[_c('Button',{on:{\"click\":function($event){_vm.clearFilter('filterForm')}}},[_vm._v(\"清空筛选条件\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"pull-right\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.sureFilter}},[_vm._v(\"确定\")])],1)]),_vm._v(\" \"),_c('Form',{ref:\"filterForm\",attrs:{\"model\":_vm.filterForm,\"label-position\":\"top\"}},[_c('FormItem',{attrs:{\"label\":\"报修类型\",\"prop\":\"repairCategoryId\"}},[_c('Select',{model:{value:(_vm.filterForm.repairCategoryId),callback:function ($$v) {_vm.$set(_vm.filterForm, \"repairCategoryId\", $$v)},expression:\"filterForm.repairCategoryId\"}},_vm._l((_vm.repairLists),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"服务网点\",\"prop\":\"departmentId\"}},[_c('Select',{model:{value:(_vm.filterForm.departmentId),callback:function ($$v) {_vm.$set(_vm.filterForm, \"departmentId\", $$v)},expression:\"filterForm.departmentId\"}},_vm._l((_vm.stationLists),function(item){return _c('Option',{key:item.id,attrs:{\"value\":item.id}},[_vm._v(_vm._s(item.name))])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"时间\",\"prop\":\"dateRange\"}},[_c('DatePicker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"daterange\"},on:{\"on-change\":_vm.filterDateChange},model:{value:(_vm.filterForm.dateRange),callback:function ($$v) {_vm.$set(_vm.filterForm, \"dateRange\", $$v)},expression:\"filterForm.dateRange\"}})],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-51c0327e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/finance/income-detail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-51c0327e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./income-detail.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./income-detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./income-detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51c0327e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./income-detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-51c0327e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/finance/income-detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}